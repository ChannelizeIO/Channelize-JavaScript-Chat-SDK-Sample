window.Channelize=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=98)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(94),i=n.n(r),o=n(23),s=n(5);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"request",value:function(t,e){e||(e={});var n=t;e.absolute||(n=o.a.baseUrl+t);var r=s.a.getInstance();return e.headers=e.headers||{},e.headers["Public-Key"]=r.publicKey,!e.noAuth&&r.accessToken&&(e.headers.Authorization="Bearer "+r.accessToken),i()(n,e)}},{key:"error",value:function(t){return t.response?t.response.data.error||t.response.data:t}}],(n=null)&&a(e.prototype,n),r&&a(e,r),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={ALREADY_CONNECTED:"Channelize server is already connected.",ALREADY_DISCONNECTED:"Channelize server is already disconnected.",REQUIRED_PUBLIC_KEY:"Public key is required.",INVALID_TYPE_OBJECT:"%s should be a object.",INVALID_CALLBACK:"Callback should be a function.",INVALID_FILE_OBJECT:"File should be a file object.",INVALID_FILE_TYPE:"Only image, video and audio file types are supported.",INVALID_USER_ID:"User Id should be a string.",INVALID_USER_IDS:"User Ids should be an array.",INVALID_CONVERSATION_IDS:"Conversation Ids should be an array.",REQUIRED_USER_OR_CONVERSATION:"One of Conversation Ids and user Ids is required.",INVALID_ID:"Id should be a string.",INVALID_USER_NAME:"Display Name should be a string.",INVALID_DATA:"Data should be an object.",INVALID_MULTIPLE_MESSAGE_OBJECT:"Message data should be an object.",INVALID_PROFILE_IMG:"Img should be a file object.",INVALID_MEMBER_IDS:"Member Ids should be an array.",INVALID_MESSAGE_MENTIONED_USERS:"Mentioned users should be an array of objects having userId, order and wordCount.",INVALID_MESSAGE_ID:"Message Id should be string.",INVALID_MESSAGE_IDS:"Message Ids should be an array.",INVALID_CONVERSATION_INCLUDE:"Include should be string and can have 'members' values only.",INVALID_EVENT:"%s event is not supported.",INVALID_DEVICE_ID:"Device Id should be a string.",INVALID_EMAIL:"Email Id is not valid.",INVALID_PASSWORD:"Password should be a string.",INVALID_ACCESS_TOKEN:"Access Token is required and should be a string.",INVALID_CLIENT_SERVER_TOKEN:"Channelize Client Server Token is required and should be a string.",INVALID_MESSAGE_BODY:"Message body should be a string.",REQUIRED_BODY_OR_ATTACHMENT:"One of Body or Attachments is required.",INVALID_TITLE:"Title should be a string.",INVALID_DATA_PARAM:"%s parameter is not allowed.",INVALID_MESSAGE_FILE_PARAMS:"File should be a FileObject or should contain %s.",REQUIRED_SOCKET_EVENT_PARAM:"%s parameter is required in event %s.",REQUIRED_LATITUDE_LONGITUDE:"Latitude and Longitude are required in location and should be numbers.",INVALID_CONVERSATION_TITLE:"Title is required in group conversations and should be string.",INVALID_CONVERSATION_MEMBERS:"Members is required and should be array.",GROUP_CONVERSATION_REQUIRED:"Conversation should be a group conversation to perform this action.",INVALID_FRIENDSHIP_TYPE:"Type should be a number and should contain 1 or 2.",REQUIRED_ATTACHMENT_TYPE:"Type is required in all attachments.",INVALID_ATTACHMENT_TYPE:"Attachments type should be an array.",INVALID_MESSAGE_TYPE:"Invalid message type.",INVALID_MESSAGE_OBJECT:"Message Type should be an object.",INVALID_MESSAGE_PARENTID:"Message Parent id should be a string.",INVALID_MESSAGE_CUSTOMTYPE:"Message Custom type should be a string.",INVALID_MESSAGE_RECIPIENTS:"Message Recipients should be an array.",INVALID_MESSAGE_EVENTS:"Message Events should be an object.",INVALID_TYPING_STATUS:"Typing status should have a boolean value."}},function(t,e,n){"use strict";(function(t){function r(e,n){if("function"==typeof e)try{return n(e)}catch(e){return t.nextTick((function(){throw e}))}return new Promise((function(t,e){n((function(n,r){return null!=n?e(n):arguments.length>2?t(Array.prototype.slice.call(arguments,1)):void t(r)}))}))}n.d(e,"a",(function(){return r}))}).call(this,n(8))},function(t,e,n){var r;t.exports=(r=r||function(t,e){var n={},r=n.lib={},i=r.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=r.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],i=function(e){e=e;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return i/=4294967296,(i+=.5)*(t.random()>.5?1:-1)}},s=0;s<e;s+=4){var a=i(4294967296*(n||t.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new o.init(r,e)}}),s=n.enc={},a=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(n,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(n,e)}},c=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,a=i/(4*s),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,c=t.min(4*u,i);if(u){for(var f=0;f<u;f+=s)this._doProcessBlock(r,f);var l=r.splice(0,u);n.sigBytes-=c}return new o.init(l,c)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),l=(r.Hasher=f.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new l.HMAC.init(t,n).finalize(e)}}}),n.algo={});return n}(Math),r)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={BASEPATH_CONVERSATIONS:"/conversations",BASEPATH_USERS:"/users",BASEPATH_MESSAGES:"/messages",BASEPATH_FILES:"/files",BASEPATH_PUSH_NOTIFICATION_SETTINGS:"/push_notification_settings",BASEPATH_PUSH_NOTIFICATION_TOKENS:"/push_notification_tokens",LOCALSTORAGE_PREFIX:"channelize_storage_"}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g}));var r=n(43),i=n(6),o=n(45),s=n(31),a=n(48),u=n(95),c=n(97),f=n(1),l=n(4),h=n(0),p=n(2);function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _,y,b,v=n(33).Buffer,g=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t||(t={}),e.instance?e.instance:t.publicKey?(this.browser=void 0!==t.browser?t.browser:"undefined"!=typeof window,this.node=!this.browser,e.instance=this,this.connected=!1,this.publicKey=t.publicKey,this.User=r.a,this.Message=s.a,this.Conversation=o.a,this.PushNotification=a.a,this.File=u.a,void(this.chsocket=new c.a({publicKey:t.publicKey}))):function(t){throw t}(new Error(f.a.REQUIRED_PUBLIC_KEY))}var n,_,y;return n=e,y=[{key:"getInstance",value:function(){return e.instance}}],(_=[{key:"connect",value:function(e,n,r){var i=this;return Object(p.a)(r,(function(r){if(i.connected)return function(t){throw t}(new Error(f.a.ALREADY_CONNECTED));if(!e||"string"!=typeof e)return function(t){throw t}(new Error(f.a.INVALID_USER_ID));if(!n||"string"!=typeof n)return function(t){throw t}(new Error(f.a.INVALID_ACCESS_TOKEN));if(i.browser&&"localStorage"in t){var o=i.__getLocalUser(e,n);if(o)return i.loginUser=o,i.__connect(o,n,r)}i.__verifyAccessToken(e,n,(function(e,o){if(e)return r(e);i.loginUser=o.user,i.browser&&"localStorage"in t&&i.__setLocalUser(o.user,n),i.__connect(o.user,n,r)}))}))}},{key:"__getLocalUser",value:function(e,n){var r=l.a.LOCALSTORAGE_PREFIX+this.publicKey,o=t.localStorage.getItem(r);if(!o)return!1;try{o=JSON.parse(o)}catch(t){return!1}return!(!o.user||!o.accessToken)&&this.__btoa(n)===o.accessToken&&e===o.user.id&&new i.a(o.user)}},{key:"getLoginUser",value:function(){return this.connectedUser}},{key:"__btoa",value:function(t){return v.from(t).toString("base64")}},{key:"__setLocalUser",value:function(e,n){var r=l.a.LOCALSTORAGE_PREFIX+this.publicKey,i={user:e.toJSON(),accessToken:this.__btoa(n),expires:Date.now()+2592e6};t.localStorage.setItem(r,JSON.stringify(i))}},{key:"__removeLocalUser",value:function(){var e=l.a.LOCALSTORAGE_PREFIX+this.publicKey;t.localStorage.removeItem(e)}},{key:"__connect",value:function(t,e,n){var r=this;return Object(p.a)(n,(function(n){var i={userName:t.id,password:""};r.chsocket.connect(t.id,i,(function(i,o){return i?n(i):(r.accessToken=r.__btoa(e),r.connectedUser=t,r.connected=!0,n(null,!0))}))}))}},{key:"disconnect",value:function(t,e){var n=this;return Object(p.a)(e,(function(e){return n.connected?t&&"string"!=typeof t?function(t){throw t}(new Error(f.a.INVALID_DEVICE_ID)):void n.__logout(t,(function(t,r){return t?e(t):(n.chsocket.__disconnect(),delete n.accessToken,n.connected=!1,n.__removeLocalUser(),e(null,r.data))})):function(t){throw t}(new Error(f.a.ALREADY_DISCONNECTED))}))}},{key:"loginWithEmailPassword",value:function(t,n,r){var o=this;return Object(p.a)(r,(function(r){return t&&o.__isValidEmail(t)?n&&"string"==typeof n?void h.a.request(e.basePath+"/login",{method:"post",data:{authenticationType:1,email:t,password:n}}).then((function(t){return t.data.user=new i.a(t.data.user),r(null,t.data)})).catch((function(t){return r(h.a.error(t))})):function(t){throw t}(new Error(f.a.INVALID_PASSWORD)):function(t){throw t}(new Error(f.a.INVALID_EMAIL))}))}},{key:"loginWithUserId",value:function(t,n,r){return Object(p.a)(r,(function(r){return t&&"string"==typeof t?n&&"string"==typeof n?void h.a.request(e.basePath+"/login",{method:"post",data:{authenticationType:0,userId:t,pmClientServerToken:n}}).then((function(t){return r(null,t.data)})).catch((function(t){return r(h.a.error(t))})):function(t){throw t}(new Error(f.a.INVALID_CLIENT_SERVER_TOKEN)):function(t){throw t}(new Error(f.a.INVALID_USER_ID))}))}},{key:"__verifyAccessToken",value:function(t,n,r){return Object(p.a)(r,(function(t){h.a.request(e.basePath+"/verify_access_token",{method:"post",data:{accessToken:n}}).then((function(e){return e.data.user=new i.a(e.data.user),t(null,e.data)})).catch((function(e){return t(h.a.error(e))}))}))}},{key:"__logout",value:function(t,n){return Object(p.a)(n,(function(n){h.a.request(e.basePath+"/logout",{method:"post",data:{deviceId:t}}).then((function(t){return n(null,t)})).catch((function(t){return n(h.a.error(t))}))}))}},{key:"__isValidEmail",value:function(t){return/\S+@\S+\.\S+/.test(t)}}])&&d(n.prototype,_),y&&d(n,y),e}();_=g,y="basePath",b=l.a.BASEPATH_USERS,y in _?Object.defineProperty(_,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):_[y]=b}).call(this,n(11))},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(29),i=n(5),o=n(4),s=n(1),a=n(9),u=n(0),c=n(2);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(b,t);var e,n,r,o,y=(e=b,function(){var t,n=_(e);if(d()){var r=_(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function b(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),y.call(this,t)}return n=b,(r=[{key:"updateInfo",value:function(t,e){var n=this;return Object(c.a)(e,(function(e){if("object"!=f(t))return function(t){throw t}(new Error(s.a.INVALID_DATA));var r=a.a.getInvalidFilter(["displayName","isOnline","language","notification","profileImageUrl","profileUrl","visibility"],t);if(r)return function(t){throw t}(new Error(a.a.sprintf(s.a.INVALID_DATA_PARAM,r)));u.a.request(b.basePath+"/"+n.id,{method:"put",data:t}).then((function(t){return e(null,new b(t.data))})).catch((function(t){return e(u.a.error(t))}))}))}},{key:"updateProfilePhoto",value:function(t,e){var n=this;return Object(c.a)(e,(function(e){if("object"!=f(t))return function(t){throw t}(new Error(s.a.INVALID_PROFILE_IMG));i.a.getInstance().File.upload(t,"image",!1,(function(t,r){if(t)return e(t);var i={profileImageUrl:r.fileUrl};u.a.request(b.basePath+"/"+n.id,{method:"put",data:i}).then((function(t){return e(null,new b(t.data))})).catch((function(t){return e(u.a.error(t))}))}))}))}}])&&l(n.prototype,r),o&&l(n,o),b}(r.a);y(b,"__properties",{id:null,createdAt:null,displayName:null,email:null,isOnline:null,language:null,lastSeen:null,notification:null,profileImageUrl:null,profileUrl:null,updatedAt:null,visibility:null,isDeleted:null,isActive:null,role:null,metaData:null}),y(b,"basePath",o.a.BASEPATH_USERS)},function(t,e,n){var r,i,o,s,a,u,c,f,l,h,p,d,_,y,b,v,g,m,w;t.exports=(r=n(3),void(r.lib.Cipher||(i=r,o=i.lib,s=o.Base,a=o.WordArray,u=o.BufferedBlockAlgorithm,c=i.enc,c.Utf8,f=c.Base64,l=i.algo.EvpKDF,h=o.Cipher=u.extend({cfg:s.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?w:g}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),o.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=i.mode={},d=o.BlockCipherMode=s.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),_=p.CBC=function(){var t=d.extend();function e(t,e,n){var r=this._iv;if(r){var i=r;this._iv=void 0}else i=this._prevBlock;for(var o=0;o<n;o++)t[e+o]^=i[o]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=o}}),t}(),y=(i.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(i);var u=a.create(o,r);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:_,padding:y}),reset:function(){h.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else r=n.createDecryptor,this._minBufferSize=1;this._mode=r.call(n,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4}),b=o.CipherParams=s.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),v=(i.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var r=a.create([1398893684,1701076831]).concat(n).concat(e);else r=e;return r.toString(f)},parse:function(t){var e=f.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var r=a.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return b.create({ciphertext:e,salt:r})}},g=o.SerializableCipher=s.extend({cfg:s.extend({format:v}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),o=i.finalize(e),s=i.cfg;return b.create({ciphertext:o,key:n,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(i.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=a.random(8));var i=l.create({keySize:e+n}).compute(t,r),o=a.create(i.words.slice(e),4*n);return i.sigBytes=4*e,b.create({key:i,iv:o,salt:r})}},w=o.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:m}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=i.iv;var o=g.encrypt.call(this,t,e,i.key,r);return o.mixIn(i),o},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=i.iv,g.decrypt.call(this,t,e,i.key,r)}}))))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],f=!1,l=-1;function h(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!f){var t=a(h);f=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function _(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||f||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={sprintf:function(t){for(var e=1;e<arguments.length;e++)t=t?t.replace(/%s/,arguments[e]):"";return t},getInvalidFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;return Object.keys(e).forEach((function(e){t.includes(e)||(n=e)})),n},getRequiedFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=Object.keys(e);return t.forEach((function(t){r.includes(t)||n.push(t)})),n}}},function(t,e,n){"use strict";var r=n(60),i=n(100),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,(function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(33),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";var r=n(25),i=n(79),o=n(53),s=n(80),a=n(81);(t.exports=function(t,e){var n,i,u,c,f;return arguments.length<2||"string"!=typeof t?(c=e,e=t,t=null):c=arguments[2],r(t)?(n=a.call(t,"c"),i=a.call(t,"e"),u=a.call(t,"w")):(n=u=!0,i=!1),f={value:e,configurable:n,enumerable:i,writable:u},c?o(s(c),f):f}).gs=function(t,e,n){var u,c,f,l;return"string"!=typeof t?(f=n,n=e,e=t,t=null):f=arguments[3],r(e)?i(e)?r(n)?i(n)||(f=n,n=void 0):n=void 0:(f=e,e=n=void 0):e=void 0,r(t)?(u=a.call(t,"c"),c=a.call(t,"e")):(u=!0,c=!1),l={get:e,set:n,configurable:u,enumerable:c},f?o(s(f),l):l}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(29),i=(n(1),n(4)),o=(n(5),n(0)),s=n(2);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(p,t);var e,n,r,i,a=(e=p,function(){var t,n=h(e);if(l()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function p(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),a.call(this,t)}return n=p,(r=[{key:"deleteForMe",value:function(t){var e=this;return Object(s.a)(t,(function(t){o.a.request(p.basePath+"/delete",{method:"post",data:{messageIds:[e.id]}}).then((function(e){return t(null,e.data)})).catch((function(e){return t(o.a.error(e))}))}))}},{key:"deleteForEveryone",value:function(t){var e=this;return Object(s.a)(t,(function(t){o.a.request(p.basePath+"/delete_for_everyone",{method:"post",data:{messageIds:[e.id]}}).then((function(e){return t(null,e.data)})).catch((function(e){return t(o.a.error(e))}))}))}}])&&u(n.prototype,r),i&&u(n,i),p}(r.a);p(d,"__properties",{id:null,type:null,customType:null,attachments:[],body:null,conversationId:null,ownerId:null,owner:{},mentionedUsers:[],isDeleted:null,createdAt:null,updatedAt:null,refMsgId:null,metaData:null,parentId:null,originalMessageId:null}),p(d,"basePath",i.a.BASEPATH_MESSAGES)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){"use strict";var r=n(24);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(29),i=(n(15),n(31)),o=n(5),s=n(4),a=n(1),u=(n(9),n(46)),c=(n(116),n(0)),f=n(2);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(v,t);var e,n,r,s,b=(e=v,function(){var t,n=y(e);if(_()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)});function v(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),(e=b.call(this,t)).messageService=i.a,e}return n=v,(r=[{key:"addAdmin",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){return n.isGroup?t&&"string"==typeof t?void c.a.request(v.basePath+"/"+n.id+"/add_admin",{method:"put",data:{memberId:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(c.a.error(t))})):function(t){throw t}(new Error(a.a.INVALID_USER_ID)):function(t){throw t}(new Error(a.a.GROUP_CONVERSATION_REQUIRED))}))}},{key:"addMembers",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){return n.isGroup?Array.isArray(t)?void c.a.request(v.basePath+"/"+n.id+"/add_members",{method:"post",data:{members:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(c.a.error(t))})):function(t){throw t}(new Error(a.a.INVALID_MEMBER_IDS)):function(t){throw t}(new Error(a.a.GROUP_CONVERSATION_REQUIRED))}))}},{key:"removeMembers",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){return n.isGroup?Array.isArray(t)?void c.a.request(v.basePath+"/"+n.id+"/remove_members",{method:"post",data:{members:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(c.a.error(t))})):function(t){throw t}(new Error(a.a.INVALID_MEMBER_IDS)):function(t){throw t}(new Error(a.a.GROUP_CONVERSATION_REQUIRED))}))}},{key:"clear",value:function(t){var e=this;return Object(f.a)(t,(function(t){c.a.request(v.basePath+"/"+e.id+"/clear",{method:"delete"}).then((function(e){return t(null,e.data)})).catch((function(e){return t(c.a.error(e))}))}))}},{key:"delete",value:function(t){var e=this;return Object(f.a)(t,(function(t){c.a.request(v.basePath+"/"+e.id+"/delete",{method:"delete"}).then((function(e){return t(null,e.data)})).catch((function(e){return t(c.a.error(e))}))}))}},{key:"leave",value:function(t){var e=this;return Object(f.a)(t,(function(t){c.a.request(v.basePath+"/"+e.id+"/leave",{method:"post"}).then((function(e){return t(null,e.data)})).catch((function(e){return t(c.a.error(e))}))}))}},{key:"markAsRead",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){var r;if(t)r=t;else{var i=new Date;r=i.toISOString()}c.a.request(v.basePath+"/"+n.id+"/mark_as_read",{method:"put",data:{timestamp:r}}).then((function(t){var i=o.a.getInstance();return n.lastReadAt.hasOwnProperty(i.loginUser.id)&&(n.lastReadAt[i.loginUser.id]=r),e(null,t.data)})).catch((function(t){return e(c.a.error(t))}))}))}},{key:"updateTitle",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){return n.isGroup?"string"!=typeof t?function(t){throw t}(new Error(a.a.INVALID_TITLE)):void c.a.request(v.basePath+"/"+n.id+"/update_title",{method:"put",data:{title:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(c.a.error(t))})):function(t){throw t}(new Error(a.a.GROUP_CONVERSATION_REQUIRED))}))}},{key:"muteConversation",value:function(t){var e=this;return Object(f.a)(t,(function(t){c.a.request(v.basePath+"/"+e.id+"/update_settings",{method:"put",data:{mute:!0}}).then((function(e){return t(null,e.data)})).catch((function(e){return t(c.a.error(e))}))}))}},{key:"unmuteConversation",value:function(t){var e=this;return Object(f.a)(t,(function(t){c.a.request(v.basePath+"/"+e.id+"/update_settings",{method:"put",data:{mute:!1}}).then((function(e){return t(null,e.data)})).catch((function(e){return t(c.a.error(e))}))}))}},{key:"updateProfilePhoto",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){return n.isGroup?"object"!=l(t)?function(t){throw t}(new Error(a.a.INVALID_PROFILE_IMG)):void o.a.getInstance().File.upload(t,"image",!1,(function(t,r){if(t)return e(t);var i={profileImageUrl:r.fileUrl};c.a.request(v.basePath+"/"+n.id+"/update_profile",{method:"put",data:i}).then((function(t){return e(null,t.data)})).catch((function(t){return e(t,null)}))})):function(t){throw t}(new Error(a.a.GROUP_CONVERSATION_REQUIRED))}))}},{key:"sendMessage",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){t.conversationId=n.id,t.isGroup=n.isGroup,n.messageService._sendMessage(t,(function(t,n){return t?e(c.a.error(t)):e(null,n)}))}))}},{key:"uploadFile",value:function(t,e,n){var r=this;return Object(f.a)(n,(function(n){r.messageService._uploadFile(t,e,(function(t,e){return t?n(t):n(null,e)}))}))}},{key:"updateTypingStatus",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){if("boolean"!=typeof t)return function(t){throw t}(new Error(a.a.INVALID_TYPING_STATUS));c.a.request(v.basePath+"/"+n.id+"/send_typing_status",{method:"post",data:{isTyping:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(c.a.error(t))}))}))}},{key:"getMembers",value:function(t){var e=this;if(this.members.length)return t(null,this.members);c.a.request(v.basePath+"/"+this.id+"/members").then((function(n){return e.members=n.data,t(null,n.data)})).catch((function(e){return t(c.a.error(e))}))}},{key:"getReadMembers",value:function(t){var e=this;if("object"!=l(t))return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_OBJECT));var n={};return Object.keys(this.lastReadAt).forEach((function(r){t.createdAt<=e.lastReadAt[r]&&(n[r]=e.lastReadAt[r])})),n}},{key:"readByAllMembers",value:function(t){var e=this;if("object"!=l(t))return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_OBJECT));var n=!0;return Object.keys(this.lastReadAt).forEach((function(r){t.createdAt>=e.lastReadAt[r]&&t.ownerId!=r&&(n=!1)})),n}},{key:"createMessageListQuery",value:function(){return new u.a(this.id)}}])&&h(n.prototype,r),s&&h(n,s),v}(r.a);b(v,"__properties",{id:null,type:null,config:{},customType:null,metaData:{},lastMessage:{},lastReadAt:{},title:null,isGroup:null,createdAt:null,memberCount:0,ownerId:null,members:[],profileImageUrl:null,isActive:null,isAdmin:null,isDeleted:null,mute:null,unreadMessageCount:null,updatedAt:null,user:{}}),b(v,"basePath",s.a.BASEPATH_CONVERSATIONS)},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function f(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var i,o,s,a;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=f(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):y(i,i.length)}function _(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,f=y(u,c);for(n=0;n<c;++n)o(f[n],this,e)}return!0},a.prototype.addListener=function(t,e){return l(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return l(this,t,e,!0)},a.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,o,s;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return d(this,t,!0)},a.prototype.rawListeners=function(t){return d(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},a.prototype.listenerCount=_,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){"use strict";t.exports=n(157)()?n(38).Symbol:n(160)},function(t,e,n){"use strict";var r=n(32),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=l;var o=Object.create(n(34));o.inherits=n(16);var s=n(68),a=n(72);o.inherits(l,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var f=u[c];l.prototype[f]||(l.prototype[f]=a.prototype[f])}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),l.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={baseUrl:"https://api.channelize.io/v2",AWS_REGION:"us-east-1",AWS_IOT_HOST:"am1p7ut7tcfuv-ats.iot.us-east-1.amazonaws.com",AWS_COGNITO_IDENTITY_POOL_ID:"us-east-1:63b1a2d1-849d-4f12-bcaf-bc275a0d5ba9",AWS_ACCESS_KEY:"AKIA5U3PQGCRIELB7UL5",AWS_SECRET_KEY:"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"}},function(t,e,n){"use strict";var r=n(136)();t.exports=function(t){return t!==r&&null!==t}},function(t,e,n){"use strict";t.exports=function(t){return null!=t}},function(t,e,n){var r,i,o;t.exports=(o=n(3),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=n.charAt(64);if(r){var o=t.indexOf(r);-1!=o&&(e=o)}for(var s=[],a=0,u=0;u<e;u++)if(u%4){var c=n.indexOf(t.charAt(u-1))<<u%4*2|n.indexOf(t.charAt(u))>>>6-u%4*2;s[a>>>2]|=c<<24-a%4*8,a++}return i.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(t,e,n){var r;t.exports=(r=n(3),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=t[e+0],u=t[e+1],p=t[e+2],d=t[e+3],_=t[e+4],y=t[e+5],b=t[e+6],v=t[e+7],g=t[e+8],m=t[e+9],w=t[e+10],E=t[e+11],S=t[e+12],I=t[e+13],k=t[e+14],O=t[e+15],A=o[0],T=o[1],x=o[2],P=o[3];A=c(A,T,x,P,s,7,a[0]),P=c(P,A,T,x,u,12,a[1]),x=c(x,P,A,T,p,17,a[2]),T=c(T,x,P,A,d,22,a[3]),A=c(A,T,x,P,_,7,a[4]),P=c(P,A,T,x,y,12,a[5]),x=c(x,P,A,T,b,17,a[6]),T=c(T,x,P,A,v,22,a[7]),A=c(A,T,x,P,g,7,a[8]),P=c(P,A,T,x,m,12,a[9]),x=c(x,P,A,T,w,17,a[10]),T=c(T,x,P,A,E,22,a[11]),A=c(A,T,x,P,S,7,a[12]),P=c(P,A,T,x,I,12,a[13]),x=c(x,P,A,T,k,17,a[14]),A=f(A,T=c(T,x,P,A,O,22,a[15]),x,P,u,5,a[16]),P=f(P,A,T,x,b,9,a[17]),x=f(x,P,A,T,E,14,a[18]),T=f(T,x,P,A,s,20,a[19]),A=f(A,T,x,P,y,5,a[20]),P=f(P,A,T,x,w,9,a[21]),x=f(x,P,A,T,O,14,a[22]),T=f(T,x,P,A,_,20,a[23]),A=f(A,T,x,P,m,5,a[24]),P=f(P,A,T,x,k,9,a[25]),x=f(x,P,A,T,d,14,a[26]),T=f(T,x,P,A,g,20,a[27]),A=f(A,T,x,P,I,5,a[28]),P=f(P,A,T,x,p,9,a[29]),x=f(x,P,A,T,v,14,a[30]),A=l(A,T=f(T,x,P,A,S,20,a[31]),x,P,y,4,a[32]),P=l(P,A,T,x,g,11,a[33]),x=l(x,P,A,T,E,16,a[34]),T=l(T,x,P,A,k,23,a[35]),A=l(A,T,x,P,u,4,a[36]),P=l(P,A,T,x,_,11,a[37]),x=l(x,P,A,T,v,16,a[38]),T=l(T,x,P,A,w,23,a[39]),A=l(A,T,x,P,I,4,a[40]),P=l(P,A,T,x,s,11,a[41]),x=l(x,P,A,T,d,16,a[42]),T=l(T,x,P,A,b,23,a[43]),A=l(A,T,x,P,m,4,a[44]),P=l(P,A,T,x,S,11,a[45]),x=l(x,P,A,T,O,16,a[46]),A=h(A,T=l(T,x,P,A,p,23,a[47]),x,P,s,6,a[48]),P=h(P,A,T,x,v,10,a[49]),x=h(x,P,A,T,k,15,a[50]),T=h(T,x,P,A,y,21,a[51]),A=h(A,T,x,P,S,6,a[52]),P=h(P,A,T,x,d,10,a[53]),x=h(x,P,A,T,w,15,a[54]),T=h(T,x,P,A,u,21,a[55]),A=h(A,T,x,P,g,6,a[56]),P=h(P,A,T,x,O,10,a[57]),x=h(x,P,A,T,b,15,a[58]),T=h(T,x,P,A,I,21,a[59]),A=h(A,T,x,P,_,6,a[60]),P=h(P,A,T,x,E,10,a[61]),x=h(x,P,A,T,p,15,a[62]),T=h(T,x,P,A,m,21,a[63]),o[0]=o[0]+A|0,o[1]=o[1]+T|0,o[2]=o[2]+x|0,o[3]=o[3]+P|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),s=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var f=u[c];u[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+i+s;return(a<<o|a>>>32-o)+e}function f(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+i+s;return(a<<o|a>>>32-o)+e}function l(t,e,n,r,i,o,s){var a=t+(e^n^r)+i+s;return(a<<o|a>>>32-o)+e}function h(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+i+s;return(a<<o|a>>>32-o)+e}e.MD5=o._createHelper(u),e.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5)},function(t,e,n){var r,i,o,s,a,u,c,f;t.exports=(f=n(3),n(57),n(58),i=(r=f).lib,o=i.Base,s=i.WordArray,a=r.algo,u=a.MD5,c=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),i=s.create(),o=i.words,a=n.keySize,u=n.iterations;o.length<a;){c&&r.update(c);var c=r.update(t).finalize(e);r.reset();for(var f=1;f<u;f++)c=r.finalize(c),r.reset();i.concat(c)}return i.sigBytes=4*a,i}}),r.EvpKDF=function(t,e,n){return c.create(n).compute(t,e)},f.EvpKDF)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return i}));var i=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r={},i=this.constructor.__properties||{};Object.keys(i).forEach((function(t){r[t]=e.hasOwnProperty(t)?e[t]:i[t]})),Object.keys(i).forEach((function(t){Object.defineProperty(n,t,{get:function(){return r[t]},set:function(e){r[t]=e}})}))}var e,n,i;return e=t,(n=[{key:"toJSON",value:function(){var t=this,e=this.constructor.__properties||{},n={};return Object.keys(e).forEach((function(e){n[e]=t[e]})),n}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return i}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"__getCountFilter",value:function(t){return(t=t||this._filter).hasOwnProperty("include")&&delete t.include,t.hasOwnProperty("sort")&&delete t.sort,t.hasOwnProperty("skip")&&delete t.skip,t.hasOwnProperty("limit")&&delete t.limit,t}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(14),i=n(15),o=n(5),s=n(4),a=n(1),u=n(9),c=n(0),f=n(2);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v,g,m,w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,r,s,v=(e=g,function(){var t,n=b(e);if(y()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _(this,t)});function g(){return h(this,g),v.apply(this,arguments)}return n=g,s=[{key:"getTotalUnreadMessageCount",value:function(t){return Object(f.a)(t,(function(t){c.a.request(g.basePath+"/unread/count",{method:"get"}).then((function(e){return t(null,e.data)})).catch((function(e){return t(c.a.error(e))}))}))}},{key:"forwardMessages",value:function(t,e,n,r){return Object(f.a)(r,(function(r){if(!Array.isArray(t)&&t.length)return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_IDS));if(!Array.isArray(e))return function(t){throw t}(new Error(a.a.INVALID_USER_IDS));if(!Array.isArray(n))return function(t){throw t}(new Error(a.a.INVALID_CONVERSATION_IDS));if(!e.length&&!n.length)return function(t){throw t}(new Error(a.a.REQUIRED_USER_OR_CONVERSATION));o.a.getInstance();var i={messageIds:t};e.length?i.userIds=e:n.length&&(i.conversationIds=n),c.a.request(g.basePath+"/forward",{method:"post",data:i}).then((function(t){return r(null,t.data)})).catch((function(t){return r(c.a.error(t))}))}))}},{key:"sendMessage",value:function(t,e){var n=this;return Object(f.a)(e,(function(e){if(!t.userId||"string"!=typeof t.userId)return function(t){throw t}(new Error(a.a.INVALID_USER_ID));n._sendMessage(t,(function(t,n){return t?e(t):e(null,n)}))}))}},{key:"uploadFile",value:function(t,e,n){var r=this;return Object(f.a)(n,(function(n){r._uploadFile(t,e,(function(t,e){return t?n(t):n(null,e)}))}))}},{key:"broadcast",value:function(t,e,n,r){var i=this;return Object(f.a)(r,(function(r){if(e=e||[],!(t=t||[]).length&&!e.length)return function(t){throw t}(new Error(a.a.REQUIRED_USER_OR_CONVERSATION));if("object"!=l(n))return function(t){throw t}(new Error(a.a.INVALID_MULTIPLE_MESSAGE_OBJECT));if(!n.userId||"string"!=typeof n.userId)return function(t){throw t}(new Error(a.a.INVALID_USER_ID));i._validateMessageObject(n);var o={};t.length?o.userIds=t:e.length&&(o.conversationIds=e),Object.assign(o,n),c.a.request(g.basePath+"/broadcast",{method:"post",data:o}).then((function(t){return r(null,t.data)})).catch((function(t){return r(c.a.error(t))}))}))}},{key:"deleteMessagesForMe",value:function(t,e){return Object(f.a)(e,(function(e){if(!Array.isArray(t))return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_IDS));c.a.request(g.basePath+"/delete",{method:"post",data:{messageIds:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(c.a.error(t))}))}))}},{key:"deleteMessagesForEveryone",value:function(t,e){return Object(f.a)(e,(function(e){if(!Array.isArray(t))return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_IDS));c.a.request(g.basePath+"/delete_for_everyone",{method:"post",data:{messageIds:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(c.a.error(t))}))}))}},{key:"_sendMessage",value:function(t,e){this._validateMessageObject(t),c.a.request(i.a.basePath+"/send",{method:"post",data:t}).then((function(t){return e(null,new i.a(t.data))})).catch((function(t){return e(c.a.error(t))}))}},{key:"_uploadFile",value:function(t,e,n){if("object"!=l(t))return function(t){throw t}(new Error(u.a.sprintf(a.a.INVALID_TYPE_OBJECT,"file")));var r=o.a.getInstance(),i=t.type.split("/").shift();r.File.upload(t,i,e,(function(t,e){return t?n(t):n(null,e)}))}},{key:"_validateMessageObject",value:function(t){if(t.body&&"string"!=typeof t.body)return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_BODY));if(t.attachments&&!Array.isArray(t.attachments))return function(t){throw t}(new Error(a.a.INVALID_ATTACHMENT_TYPE));if(!t.body&&!t.attachments)return function(t){throw t}(new Error(a.a.REQUIRED_BODY_OR_ATTACHMENT));if(t.parentId&&"string"!=typeof t.parentId)return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_PARENTID));if(t.customType&&"string"!=typeof t.customType)return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_CUSTOMTYPE));if(t.recipients&&!Array.isArray(t.recipients))return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_RECIPIENTS));if(t.events&&"object"!=l(t.events))return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_EVENTS));if(t.type&&!["normal","reply","forward","admin"].includes(t.type))return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_TYPE));if(t.attachments&&t.attachments.length&&t.attachments.forEach((function(t){if(!t.type)return function(t){throw t}(new Error(a.a.REQUIRED_ATTACHMENT_TYPE))})),t.isGroup&&t.mentionedUsers){if(!Array.isArray(t.mentionedUsers))return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_MENTIONED_USERS));for(var e=t.mentionedUsers.length-1;e>=0;e--)if(u.a.getRequiedFilter(["userId","order","wordCount"],t.mentionedUsers[e]).length)return function(t){throw t}(new Error(a.a.INVALID_MESSAGE_MENTIONED_USERS))}t.parentId&&!t.type?t.type="reply":t.type=t.type?t.type:"normal"}}],(r=null)&&p(n.prototype,r),s&&p(n,s),g}(r.a);v=w,g="basePath",m=s.a.BASEPATH_MESSAGES,g in v?Object.defineProperty(v,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):v[g]=m},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(8))},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(124),i=n(125),o=n(69);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return q(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var f=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var l=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){l=!1;break}if(l)return o}return-1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function m(t,e,n,r){return F(q(e,t.length-n),t,n,r)}function w(t,e,n,r){return F(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function E(t,e,n,r){return w(t,e,n,r)}function S(t,e,n,r){return F(H(e),t,n,r)}function I(t,e,n,r){return F(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):_.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),f=t.slice(e,n),l=0;l<a;++l)if(c[l]!==f[l]){o=c[l],s=f[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return m(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return E(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function x(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function j(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:q(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(11))},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(33).Buffer)},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),u=r[n];n<o;u=r[++n])_(u)||!m(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),f(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function f(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return b(i)||(i=f(t,i,r)),i}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(_(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(g(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return l(n)}var c,m="",I=!1,k=["{","}"];(p(n)&&(I=!0,k=["[","]"]),S(n))&&(m=" [Function"+(n.name?": "+n.name:"")+"]");return g(n)&&(m=" "+RegExp.prototype.toString.call(n)),w(n)&&(m=" "+Date.prototype.toUTCString.call(n)),E(n)&&(m=" "+l(n)),0!==s.length||I&&0!=n.length?r<0?g(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=I?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)T(e,String(s))?o.push(h(t,e,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))})),o}(t,n,r,a,s):s.map((function(e){return h(t,n,r,a,e,I)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,m,k)):k[0]+m+k[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),T(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=_(n)?f(t,u.value,null):f(t,u.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function _(t){return null===t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function v(t){return void 0===t}function g(t){return m(t)&&"[object RegExp]"===I(t)}function m(t){return"object"==typeof t&&null!==t}function w(t){return m(t)&&"[object Date]"===I(t)}function E(t){return m(t)&&("[object Error]"===I(t)||t instanceof Error)}function S(t){return"function"==typeof t}function I(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(v(o)&&(o=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=t.pid;s[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else s[n]=function(){};return s[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=_,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=b,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=g,e.isObject=m,e.isDate=w,e.isError=E,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(120);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",A(),e.format.apply(e,arguments))},e.inherits=n(121),e._extend=function(t,e){if(!e||!m(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(x&&t[x]){var e;if("function"!=typeof(e=t[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,x,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),x&&Object.defineProperty(e,x,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=x,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,n).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(P,e,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(8))},function(t,e,n){(e=t.exports=n(68)).Stream=e,e.Readable=e,e.Writable=n(72),e.Duplex=n(21),e.Transform=n(74),e.PassThrough=n(132)},function(t,e,n){"use strict";t.exports=n(77)()?Object.setPrototypeOf:n(78)},function(t,e,n){"use strict";t.exports=n(158)()?globalThis:n(159)},function(t,e,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());t.exports=function(t){return r.call(t)===i}},function(t,e,n){"use strict";var r=Object.prototype.toString,i=r.call("");t.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||r.call(t)===i)||!1}},function(t,e,n){var r,i,o,s,a,u;t.exports=(u=n(3),i=(r=u).lib,o=i.Base,s=i.WordArray,(a=r.x64={}).Word=o.extend({init:function(t,e){this.high=t,this.low=e}}),a.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return s.create(n,this.sigBytes)},clone:function(){for(var t=o.clone.call(this),e=t.words=this.words.slice(0),n=e.length,r=0;r<n;r++)e[r]=e[r].clone();return t}}),u)},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(14),i=n(6),o=n(4),s=n(1),a=n(44),u=n(0),c=n(2);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b,v,g,m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(b,t);var e,n,r,o,f=(e=b,function(){var t,n=y(e);if(_()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)});function b(){return l(this,b),f.apply(this,arguments)}return n=b,o=[{key:"createUser",value:function(t,e){return Object(c.a)(e,(function(e){return"string"!=typeof t.displayName?function(t){throw t}(new Error(s.a.INVALID_USER_NAME)):e&&"function"==typeof e?void u.a.request(b.basePath,{method:"post",data:t}).then((function(t){return e(null,new i.a(t.data))})).catch((function(t){return e(u.a.error(t))})):function(t){throw t}(new Error(s.a.INVALID_CALLBACK))}))}},{key:"get",value:function(t,e){return Object(c.a)(e,(function(e){if("string"!=typeof t)return function(t){throw t}(new Error(s.a.INVALID_ID));u.a.request(b.basePath+"/"+t,{method:"get"}).then((function(t){return e(null,new i.a(t.data))})).catch((function(t){return e(u.a.error(t))}))}))}},{key:"addFriend",value:function(t,e,n){return Object(c.a)(n,(function(n){return t&&"string"==typeof t?(e||(e=2),"function"==typeof e&&(n=e,e=2),"number"==typeof e&&[1,2].includes(e)?void u.a.request(b.basePath+"/add_friend",{method:"post",data:{userId:t,type:e}}).then((function(t){return n(null,t.data)})).catch((function(t){return n(u.a.error(t))})):function(t){throw t}(new Error(s.a.INVALID_FRIENDSHIP_TYPE))):function(t){throw t}(new Error(s.a.INVALID_USER_ID))}))}},{key:"removeFriend",value:function(t,e,n){return Object(c.a)(n,(function(n){return t&&"string"==typeof t?(e||(e=2),"function"==typeof e&&(n=e,e=2),e&&"number"==typeof e&&[1,2].includes(e)?void u.a.request(b.basePath+"/remove_friend",{method:"post",data:{userId:t,type:e}}).then((function(t){return n(null,t.data)})).catch((function(t){return n(u.a.error(t))})):function(t){throw t}(new Error(s.a.INVALID_FRIENDSHIP_TYPE))):function(t){throw t}(new Error(s.a.INVALID_USER_ID))}))}},{key:"block",value:function(t,e){return Object(c.a)(e,(function(e){if("string"!=typeof t)return function(t){throw t}(new Error(s.a.INVALID_USER_ID));u.a.request(b.basePath+"/block",{method:"post",data:{userId:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(u.a.error(t))}))}))}},{key:"unblock",value:function(t,e){return Object(c.a)(e,(function(e){if("string"!=typeof t)return function(t){throw t}(new Error(s.a.INVALID_USER_ID));u.a.request(b.basePath+"/unblock",{method:"post",data:{userId:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(u.a.error(t))}))}))}},{key:"checkRelationshipStatus",value:function(t,e){return Object(c.a)(e,(function(e){if("string"!=typeof t)return function(t){throw t}(new Error(s.a.INVALID_USER_ID));u.a.request(b.basePath+"/check_relationship_status",{method:"post",data:{userId:t}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(u.a.error(t))}))}))}},{key:"createUserListQuery",value:function(){return new a.a}}],(r=null)&&h(n.prototype,r),o&&h(n,o),b}(r.a);b=m,v="basePath",g=o.a.BASEPATH_USERS,v in b?Object.defineProperty(b,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[v]=g},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(30),i=n(6),o=n(1),s=n(4),a=n(0),u=n(2);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _,y,b,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(_,t);var e,n,r,s,c=(e=_,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function _(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),(t=c.call(this))._filter={},t}return n=_,(r=[{key:"blocksList",value:function(t){var e=this;return Object(u.a)(t,(function(t){var n=e.__getBlockFilter();a.a.request(_.basePath+"/blocks",{method:"get",params:n}).then((function(e){var n=[];return e.data.forEach((function(t){n.push(new i.a(t))})),t(null,n)})).catch((function(e){return t(e)}))}))}},{key:"blocksCount",value:function(t){var e=this;return Object(u.a)(t,(function(t){var n=e.__getCountFilter(e.__getBlockFilter());a.a.request(_.basePath+"/blocks/count",{method:"get",params:n}).then((function(e){return t(null,e.data)})).catch((function(e){return t(e)}))}))}},{key:"friendsList",value:function(t){var e=this;return Object(u.a)(t,(function(t){a.a.request(_.basePath+"/friends",{method:"get",params:e._filter}).then((function(e){var n=[];return e.data.forEach((function(t){n.push(new i.a(t))})),t(null,n)})).catch((function(e){return t(e)}))}))}},{key:"friendsCount",value:function(t){var e=this;return Object(u.a)(t,(function(t){var n=e.__getCountFilter();a.a.request(_.basePath+"/friends/count",{method:"get",params:n}).then((function(e){return t(null,e.data)})).catch((function(e){return t(e)}))}))}},{key:"usersList",value:function(t){var e=this;return Object(u.a)(t,(function(t){if(!t||"function"!=typeof t)return function(t){throw t}(new Error(o.a.INVALID_CALLBACK));a.a.request(_.basePath+"/",{method:"get",params:e._filter}).then((function(e){var n=[];return e.data.forEach((function(t){n.push(new i.a(t))})),t(null,n)})).catch((function(e){return t(e)}))}))}},{key:"__getBlockFilter",value:function(t){return(t=t||this._filter).hasOwnProperty("includeBlocked")&&delete t.includeBlocked,t.hasOwnProperty("skipUserIds")&&delete t.skipUserIds,t}},{key:"online",get:function(){return this._filter.online},set:function(t){this._filter.online=t}},{key:"search",get:function(){return this._filter.search},set:function(t){this._filter.search=t}},{key:"sort",get:function(){return this._filter.sort},set:function(t){this._filter.sort=t}},{key:"limit",get:function(){return this._filter.limit},set:function(t){this._filter.limit=t}},{key:"skip",get:function(){return this._filter.skip},set:function(t){this._filter.skip=t}},{key:"includeBlocked",get:function(){return this._filter.includeBlocked},set:function(t){this._filter.includeBlocked=t}},{key:"skipUserIds",get:function(){return this._filter.skipUserIds},set:function(t){this._filter.skipUserIds=t}},{key:"role",get:function(){return this._filter.role},set:function(t){this._filter.role=t}},{key:"includeDeleted",get:function(){return this._filter.includeDeleted},set:function(t){this._filter.includeDeleted=t}}])&&f(n.prototype,r),s&&f(n,s),_}(r.a);_=v,y="basePath",b=s.a.BASEPATH_USERS,y in _?Object.defineProperty(_,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):_[y]=b},function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var r=n(14),i=n(18),o=n(5),s=n(4),a=n(1),u=n(9),c=n(47),f=n(0),l=n(2);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g,m,w,E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(m,t);var e,n,r,s,g=(e=m,function(){var t,n=v(e);if(b()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)});function m(){return p(this,m),g.apply(this,arguments)}return n=m,s=[{key:"getConversation",value:function(t,e,n){return Object(l.a)(n,(function(n){if("string"!=typeof t)return function(t){throw t}(new Error(a.a.INVALID_ID));if(e&&"members"!=e)return function(t){throw t}(new Error(a.a.INVALID_CONVERSATION_INCLUDE));var r={include:e};f.a.request(m.basePath+"/"+t,{method:"get",params:r}).then((function(t){var e=t.data?new i.a(t.data):null;return n(null,e)})).catch((function(t){return n(f.a.error(t))}))}))}},{key:"createConversation",value:function(t,e){return Object(l.a)(e,(function(e){if("object"!=h(t))return function(t){throw t}(new Error(a.a.INVALID_DATA));if(t.isGroup&&(!t.title||"string"!=typeof t.title))return function(t){throw t}(new Error(a.a.INVALID_CONVERSATION_TITLE));if(!Array.isArray(t.members))return function(t){throw t}(new Error(a.a.INVALID_CONVERSATION_MEMBERS));var n=u.a.getInvalidFilter(["title","members","isGroup","profileImageUrl","createdAt","type","config","customType","metaData"],t);if(n)return function(t){throw t}(new Error(u.a.sprintf(a.a.INVALID_DATA_PARAM,n)));var r=o.a.getInstance();t.members&&t.members.push(r.loginUser.id),t.hasOwnProperty("isGroup")||(t.isGroup=!!t.hasOwnProperty("title")),f.a.request(m.basePath,{method:"post",data:t}).then((function(t){return e(null,new i.a(t.data))})).catch((function(t){return e(f.a.error(t))}))}))}},{key:"createConversationListQuery",value:function(){return new c.a}}],(r=null)&&d(n.prototype,r),s&&d(n,s),m}(r.a);g=E,m="basePath",w=s.a.BASEPATH_CONVERSATIONS,m in g?Object.defineProperty(g,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):g[m]=w},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(30),i=n(15),o=(n(1),n(4)),s=n(0),a=n(2);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d,_,y,b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,r,o,u=(e=d,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function d(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(e=u.call(this))._filter={},e.conversationId=t,e}return n=d,(r=[{key:"list",value:function(t){var e=this;return Object(a.a)(t,(function(t){s.a.request(d.basePath+"/"+e.conversationId+"/messages",{method:"get",params:e._filter}).then((function(e){var n=[];return e.data.forEach((function(t){n.push(new i.a(t))})),t(null,n)})).catch((function(e){return t(e)}))}))}},{key:"count",value:function(t){var e=this;return Object(a.a)(t,(function(t){var n=e.__getCountFilter();s.a.request(d.basePath+"/"+e.conversationId+"/messages/count",{method:"get",params:n}).then((function(e){return t(null,e.data)})).catch((function(e){return t(e)}))}))}},{key:"ids",get:function(){return this._filter.ids},set:function(t){this._filter.ids=t}},{key:"types",get:function(){return this._filter.types},set:function(t){this._filter.types=t}},{key:"customTypes",get:function(){return this._filter.customTypes},set:function(t){this._filter.customTypes=t}},{key:"attachmentTypes",get:function(){return this._filter.attachmentTypes},set:function(t){this._filter.attachmentTypes=t}},{key:"ownerIds",get:function(){return this._filter.ownerIds},set:function(t){this._filter.ownerIds=t}},{key:"parentId",get:function(){return this._filter.parentId},set:function(t){this._filter.parentId=t}},{key:"sort",get:function(){return this._filter.sort},set:function(t){this._filter.sort=t}},{key:"limit",get:function(){return this._filter.limit},set:function(t){this._filter.limit=t}},{key:"skip",get:function(){return this._filter.skip},set:function(t){this._filter.skip=t}}])&&c(n.prototype,r),o&&c(n,o),d}(r.a);d=b,_="basePath",y=o.a.BASEPATH_CONVERSATIONS,_ in d?Object.defineProperty(d,_,{value:y,enumerable:!0,configurable:!0,writable:!0}):d[_]=y},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(30),i=n(18),o=n(1),s=n(4),a=n(0),u=n(2);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _,y,b,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(_,t);var e,n,r,s,c=(e=_,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function _(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),(t=c.call(this))._filter={},t}return n=_,(r=[{key:"list",value:function(t){var e=this;return Object(u.a)(t,(function(t){a.a.request(_.basePath,{method:"get",params:e._filter}).then((function(e){if(!Array.isArray(e.data))return t(null,new i.a(e.data));var n=[];return e.data.forEach((function(t){n.push(new i.a(t))})),t(null,n)})).catch((function(e){return t(e)}))}))}},{key:"count",value:function(t){var e=this;return Object(u.a)(t,(function(t){var n=e.__getCountFilter();a.a.request(_.basePath+"/count",{method:"get",params:n}).then((function(e){return t(null,e.data)})).catch((function(e){return t(e)}))}))}},{key:"ids",get:function(){return this._filter.ids},set:function(t){this._filter.ids=t}},{key:"type",get:function(){return this._filter.type},set:function(t){this._filter.type=t}},{key:"customTypes",get:function(){return this._filter.customTypes},set:function(t){this._filter.customTypes=t}},{key:"search",get:function(){return this._filter.search},set:function(t){this._filter.search=t}},{key:"isGroup",get:function(){return this._filter.isGroup},set:function(t){this._filter.isGroup=t}},{key:"membersExactly",get:function(){return this._filter.membersExactly},set:function(t){this._filter.membersExactly=t}},{key:"membersIncluded",get:function(){return this._filter.membersIncluded},set:function(t){this._filter.membersIncluded=t}},{key:"includeDeleted",get:function(){return this._filter.includeDeleted},set:function(t){this._filter.includeDeleted=t}},{key:"includeOnlyActive",get:function(){return this._filter.includeOnlyActive},set:function(t){this._filter.includeOnlyActive=t}},{key:"sort",get:function(){return this._filter.sort},set:function(t){this._filter.sort=t}},{key:"include",get:function(){return this._filter.include},set:function(t){if("string"!=typeof t&&!["members"].includes(t))return function(t){throw t}(new Error(o.a.INVALID_CONVERSATION_INCLUDE));var e=t.split(",");t=(e=(e=e.map((function(t){return t.trim()}))).filter((function(t){return t}))).join(","),this._filter.include=t}},{key:"limit",get:function(){return this._filter.limit},set:function(t){this._filter.limit=t}},{key:"skip",get:function(){return this._filter.skip},set:function(t){this._filter.skip=t}}])&&f(n.prototype,r),s&&f(n,s),_}(r.a);_=v,y="basePath",b=s.a.BASEPATH_CONVERSATIONS,y in _?Object.defineProperty(_,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):_[y]=b},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(14),i=n(4),o=n(1),s=n(0),a=n(2);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _,y,b,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(y,t);var e,n,r,u,_=(e=y,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function y(){return c(this,y),_.apply(this,arguments)}return n=y,u=[{key:"getMessagingSenderId",value:function(t){return Object(a.a)(t,(function(t){s.a.request(y.basePath,{method:"get",data:{}}).then((function(e){var n=e.data&&e.data.firebase&&e.data.firebase.messagingSenderId?e.data.firebase.messagingSenderId:null;return t(null,n)})).catch((function(e){return t(s.a.error(e))}))}))}},{key:"registerFCMToken",value:function(t,e,n){return Object(a.a)(n,(function(n){if(!t||"string"!=typeof t)return function(t){throw t}(new Error(o.a.INVALID_DEVICE_ID));s.a.request(i.a.BASEPATH_PUSH_NOTIFICATION_TOKENS,{method:"post",data:{deviceId:t,token:e}}).then((function(t){return n(null,t.data)})).catch((function(t){return n(s.a.error(t))}))}))}}],(r=null)&&f(n.prototype,r),u&&f(n,u),y}(r.a);_=v,y="basePath",b=i.a.BASEPATH_PUSH_NOTIFICATION_SETTINGS,y in _?Object.defineProperty(_,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):_[y]=b},function(t,e,n){"use strict";(function(e){var r=n(10),i=n(102),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e)&&(a=n(61)),a),transformRequest:[function(t,e){return i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(o)})),t.exports=u}).call(this,n(8))},function(t,e,n){(function(e){var r=n(19),i=n(35).inherits,o=n(122),s=n(210),a=n(234),u=n(42),c=n(235),f=n(237),l=n(59);function h(t){return t>9?t:"0"+t}function p(t,e,n,r,i,o,a,c,f,l,h,p,d,_){var y=t+"\n"+r+"\n"+i+"\n"+("host:"+n.toLowerCase()+"\n")+"\nhost\n"+s.SHA256(l,{asBytes:!0});!0===d&&console.log("canonical request: "+y+"\n");var b=s.SHA256(y,{asBytes:!0});!0===d&&console.log("hashed canonical request: "+b+"\n");var v="AWS4-HMAC-SHA256\n"+p+"\n"+h+"/"+c+"/"+f+"/aws4_request\n"+b;!0===d&&console.log("string to sign: "+v+"\n");var g=function(t,e,n,r){var i=s.HmacSHA256(e,"AWS4"+t,{asBytes:!0}),o=s.HmacSHA256(n,i,{asBytes:!0}),a=s.HmacSHA256(r,o,{asBytes:!0});return s.HmacSHA256("aws4_request",a,{asBytes:!0})}(a,h,c,f);!0===d&&console.log("signing key: "+g+"\n");var m=s.HmacSHA256(v,g,{asBytes:!0});!0===d&&console.log("signature: "+m+"\n");var w=i+"&X-Amz-Signature="+m;u(_)||(w+="&X-Amz-Security-Token="+encodeURIComponent(_));var E=e+n+r+"?"+w;return!0===d&&console.log("url: "+E+"\n"),E}function d(t,e,n,r){var i,o,s=(i=new Date).getUTCFullYear()+""+h(i.getUTCMonth()+1)+h(i.getUTCDate())+"T"+h(i.getUTCHours())+h(i.getUTCMinutes())+h(i.getUTCSeconds())+"Z",a=(o=s).substring(0,o.indexOf("T")),c="X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential="+e+"%2F"+a+"%2F"+t.region+"%2Fiotdevicegateway%2Faws4_request&X-Amz-Date="+s+"&X-Amz-SignedHeaders=host",f=t.host;return u(t.port)||443===t.port||(f=t.host+":"+t.port),p("GET","wss://",f,"/mqtt",c,0,n,t.region,"iotdevicegateway","",a,s,t.debug,r)}function _(t){var e=t.host;return u(t.port)||443===t.port||(e=t.host+":"+t.port),"wss://"+e+"/mqtt"}function y(t){var e={},n={};return function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(this,t[n],parseInt(n,10))}(t.split(/\r?\n/),(function(t){var r=(t=t.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)\]\s*$/);if(r)n=r[1];else if(n){var i=t.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);i&&(e[n]=e[n]||{},e[n][i[1]]=i[2])}})),e}function b(t){if(!(this instanceof b))return new b(t);var r=this,i=[],s=!0,h=0,p="oldest";i.length=0;var v=[];v.length=0;var g=[],m=!0;g.length=0;var w=[];w.length=0;var E,S,I,k,O,A="inactive",T=null,x=250,P=1e3,C=2e4,R=128e3,j=null,N="?SDK=JavaScript&Version="+n(238).version;if(u(t)||0===Object.keys(t).length)throw new Error(a.INVALID_CONNECT_OPTIONS);if(u(t.keepalive)&&(t.keepalive=300),(u(t.enableMetrics)||!0===t.enableMetrics)&&(u(t.username)?t.username=N:t.username+=N),u(t.baseReconnectTimeMs)||(P=t.baseReconnectTimeMs),u(t.minimumConnectionTimeMs)||(C=t.minimumConnectionTimeMs),u(t.maximumReconnectTimeMs)||(R=t.maximumReconnectTimeMs),u(t.drainTimeMs)||(x=t.drainTimeMs),u(t.autoResubscribe)||(m=t.autoResubscribe),u(t.offlineQueueing)||(s=t.offlineQueueing),u(t.offlineQueueMaxSize)||(h=t.offlineQueueMaxSize),u(t.offlineQueueDropBehavior)||(p=t.offlineQueueDropBehavior),E=P,t.reconnectPeriod=E,t.fastDisconnectDetection=!0,t.resubscribe=!1,t.baseReconnectTimeMs<=0)throw new Error(a.INVALID_RECONNECT_TIMING);if(R<P)throw new Error(a.INVALID_RECONNECT_TIMING);if(C<P)throw new Error(a.INVALID_RECONNECT_TIMING);if("newest"!==p&&"oldest"!==p)throw new Error(a.INVALID_OFFLINE_QUEUEING_PARAMETERS);if(h<0)throw new Error(a.INVALID_OFFLINE_QUEUEING_PARAMETERS);if(u(t.protocol)&&(t.protocol="mqtts"),u(t.host))throw new Error(a.INVALID_CONNECT_OPTIONS);if("mqtts"===t.protocol)u(t.port)&&(t.port=8883),c(t);else if("wss"===t.protocol||"wss-custom-auth"===t.protocol){if("wss"===t.protocol){var D;if(S=u(t.accessKeyId)?e.env.AWS_ACCESS_KEY_ID:t.accessKeyId,I=u(t.secretKey)?e.env.AWS_SECRET_ACCESS_KEY:t.secretKey,k=u(t.sessionToken)?e.env.AWS_SESSION_TOKEN:t.sessionToken,u(S)||u(I))try{u(t.filename)?(O=e.env.HOME||e.env.USERPROFILE||(e.env.HOMEPATH?(e.env.HOMEDRIVE||"C:/")+e.env.HOMEPATH:null),D=f.join(O,".aws","credentials")):D=t.filename;var M=t.profile||e.env.AWS_PROFILE||"default",L=y(l.readFileSync(D,"utf-8"))[M];S=L.aws_access_key_id,I=L.aws_secret_access_key,k=L.aws_session_token}catch(t){console.log(t),console.log("Failed to read credentials from "+D)}if(u(S)||u(I))throw console.log("To connect via WebSocket/SigV4, AWS Access Key ID and AWS Secret Key must be passed either in options or as environment variables; see README.md"),new Error(a.INVALID_CONNECT_OPTIONS)}else if(u(t.customAuthHeaders))throw console.log("To authenticate with a custom authorizer, you must provide the required HTTP headers; see README.md"),new Error(a.INVALID_CONNECT_OPTIONS);if(!u(t.host)&&u(t.region)){var B=/[a-zA-Z0-9]+\.iot\.([a-z]+-[a-z]+-[0-9]+)\.amazonaws\..+/.exec(t.host);if(null===B)throw console.log("Host endpoint is not valid"),new Error(a.INVALID_CONNECT_OPTIONS);t.region=B[1]}u(t.port)&&(t.port=443),u(t.websocketOptions)?t.websocketOptions={protocol:"mqttv3.1"}:t.websocketOptions.protocol="mqttv3.1","wss-custom-auth"===t.protocol&&(t.websocketOptions.headers=t.customAuthHeaders)}u(t)||!0!==t.debug||(console.log(t),console.log("attempting new mqtt connection..."));var U={};function q(t,e){0===g.filter((function(e){return e.topic===t})).length&&g.push({topic:t,options:e})}function H(t,e){var n=g.filter((function(e){return e.topic!==t}));g=n}function F(t,e,n){var r=null;!1!==m&&("subscribe"===t?r=q:"unsubscribe"===t&&(r=H),"[object Array]"===Object.prototype.toString.call(e)?e.forEach((function(t,e,i){r(t,n)})):r(e,n))}function V(){return"inactive"===A}U.mqtts=n(239),U.wss=n(240);var z=new o.MqttClient((function(e){var n,r=t.protocol;return"wss"===r?(n=""===S||""===I?"wss://no-credentials-available":d(t,S,I,k),!0===t.debug&&console.log("using websockets, will connect to '"+n+"'..."),t.url=n):"wss-custom-auth"===r&&(t.url=_(t),!0===t.debug&&console.log("using websockets custom auth, will connect to '"+t.url+"'..."),r="wss"),U[r](e,t)}),t);function K(){E=P,z.options.reconnectPeriod=E,j=null,A="stable"}function W(){var t=w.shift();if(u(t)){var e=v.shift();if(u(e)){var n=i.shift();u(n)||z.publish(n.topic,n.message,n.options,n.callback),0===i.length&&(clearInterval(T),T=null)}else F(e.type,e.topics,e.options),"subscribe"===e.type?u(e.callback)?z.subscribe(e.topics,e.options):z.subscribe(e.topics,e.options,e.callback):"unsubscribe"===e.type&&z.unsubscribe(e.topics,e.callback)}else u(t.callback)?z.subscribe(t.topic,t.options):z.subscribe(t.topic,t.options,t.callback)}z.on("connect",(function(t){null===j&&(j=setTimeout(K,C)),A="established",null===T&&(w=g.slice(0),T=setInterval(W,x)),r.emit("connect",t)})),z.on("close",(function(e){u(e)||r.emit("error",e),u(t)||!0!==t.debug||console.log("connection lost - will attempt reconnection in "+z.options.reconnectPeriod/1e3+" seconds..."),clearTimeout(j),j=null,clearInterval(T),T=null,A="inactive",r.emit("close")})),z.on("reconnect",(function(){E*=2,E=Math.min(R,E),z.options.reconnectPeriod=E,r.emit("reconnect")})),z.on("offline",(function(){r.emit("offline")})),z.on("error",(function(t){r.emit("error",t)})),z.on("packetsend",(function(t){r.emit("packetsend",t)})),z.on("packetreceive",(function(t){r.emit("packetreceive",t)})),z.on("message",(function(t,e,n){r.emit("message",t,e,n)})),this.publish=function(t,e,n,r){var o;!0!==s||!V()&&null===T?!0!==s&&V()||z.publish(t,e,n,r):(o=!0,h>0&&i.length>=h&&("oldest"===p?i.shift():o=!1),o&&i.push({topic:t,message:e,options:n,callback:r}))},this.subscribe=function(t,e,n){V()&&!1!==m?v.length<50?v.push({type:"subscribe",topics:t,options:e,callback:n}):r.emit("error",new Error("Maximum queued offline subscription reached")):(F("subscribe",t,e),u(n)?z.subscribe(t,e):z.subscribe(t,e,n))},this.unsubscribe=function(e,n){V()&&!1!==m?v.length<50&&v.push({type:"unsubscribe",topics:e,options:t,callback:n}):(F("unsubscribe",e),z.unsubscribe(e,n))},this.end=function(t,e){z.end(t,e)},this.handleMessage=z.handleMessage.bind(z),z.handleMessage=function(t,e){r.handleMessage(t,e)},this.updateWebSocketCredentials=function(t,e,n,r){S=t,I=e,k=n},this.getWebsocketHeaders=function(){return t.websocketOptions.headers},this.updateCustomAuthHeaders=function(e){t.websocketOptions.headers=e},this.simulateNetworkFailure=function(){z.stream.emit("error",new Error("simulated connection error")),z.stream.end()}}i(b,r.EventEmitter),t.exports=b,t.exports.DeviceClient=b,t.exports.prepareWebSocketUrl=d,t.exports.prepareWebSocketCustomAuthUrl=_}).call(this,n(8))},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";var r=n(25),i={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!r(t)&&hasOwnProperty.call(i,typeof t)}},function(t,e,n){"use strict";t.exports=n(149)()?Object.assign:n(150)},function(t,e,n){"use strict";var r,i=n(75),o=n(53),s=n(22),a=n(17),u=n(13),c=n(169),f=n(20),l=Object.defineProperty,h=Object.defineProperties;t.exports=r=function(t,e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");h(this,{__list__:u("w",a(t)),__context__:u("w",e),__nextIndex__:u("w",0)}),e&&(s(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete r.prototype.constructor,h(r.prototype,o({_next:u((function(){var t;if(this.__list__)return this.__redo__&&void 0!==(t=this.__redo__.shift())?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:u((function(){return this._createResult(this._next())})),_createResult:u((function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}})),_resolve:u((function(t){return this.__list__[t]})),_unBind:u((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:u((function(){return"[object "+(this[f.toStringTag]||"Object")+"]"}))},c({_onAdd:u((function(t){t>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(e,n){e>=t&&(this.__redo__[n]=++e)}),this),this.__redo__.push(t)):l(this,"__redo__",u("c",[t])))})),_onDelete:u((function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(t))&&this.__redo__.splice(e,1),this.__redo__.forEach((function(e,n){e>t&&(this.__redo__[n]=--e)}),this)))})),_onClear:u((function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0}))}))),l(r.prototype,f.iterator,u((function(){return this})))},function(t,e,n){"use strict";var r=n(206);t.exports=function(t,e){var n;function i(r){e.rejectUnauthorized&&t.emit("error",r),n.end()}return e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",e.rejectUnauthorized=!1!==e.rejectUnauthorized,delete e.path,(n=r.connect(e)).on("secureConnect",(function(){e.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",i)})),n.on("error",i),n}},function(t,e,n){"use strict";(function(e,r){var i=n(36).Transform,o=n(207),s=n(209),a=n(12).Buffer;t.exports=function(t,n,u){var c,f,l="browser"===e.title,h=!!r.WebSocket,p=l?function t(e,n,r){if(f.bufferedAmount>_)return void setTimeout(t,y,e,n,r);v&&"string"==typeof e&&(e=a.from(e,"utf8"));try{f.send(e)}catch(t){return r(t)}r()}:function(t,e,n){if(f.readyState!==f.OPEN)return void n();v&&"string"==typeof t&&(t=a.from(t,"utf8"));f.send(t,n)};n&&!Array.isArray(n)&&"object"==typeof n&&(u=n,n=null,("string"==typeof u.protocol||Array.isArray(u.protocol))&&(n=u.protocol));u||(u={});void 0===u.objectMode&&(u.objectMode=!(!0===u.binary||void 0===u.binary));var d=function(t,e,n){var r=new i({objectMode:t.objectMode});return r._write=e,r._flush=n,r}(u,p,(function(t){f.close(),t()}));u.objectMode||(d._writev=S);var _=u.browserBufferSize||524288,y=u.browserBufferTimeout||1e3;"object"==typeof t?f=t:(f=h&&l?new s(t,n):new s(t,n,u)).binaryType="arraybuffer";var b=void 0===f.addEventListener;f.readyState===f.OPEN?c=d:(c=c=o(void 0,void 0,u),u.objectMode||(c._writev=S),b?f.addEventListener("open",g):f.onopen=g);c.socket=f,b?(f.addEventListener("close",m),f.addEventListener("error",w),f.addEventListener("message",E)):(f.onclose=m,f.onerror=w,f.onmessage=E);d.on("close",(function(){f.close()}));var v=!u.objectMode;function g(){c.setReadable(d),c.setWritable(d),c.emit("connect")}function m(){c.end(),c.destroy()}function w(t){c.destroy(t)}function E(t){var e=t.data;e=e instanceof ArrayBuffer?a.from(e):a.from(e,"utf8"),d.push(e)}function S(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)"string"==typeof t[r].chunk?n[r]=a.from(t[r],"utf8"):n[r]=t[r].chunk;this._write(a.concat(n),"binary",e)}return c}}).call(this,n(8),n(11))},function(t,e,n){var r,i,o,s,a,u,c,f;t.exports=(f=n(3),i=(r=f).lib,o=i.WordArray,s=i.Hasher,a=r.algo,u=[],c=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],c=0;c<80;c++){if(c<16)u[c]=0|t[e+c];else{var f=u[c-3]^u[c-8]^u[c-14]^u[c-16];u[c]=f<<1|f>>>31}var l=(r<<5|r>>>27)+a+u[c];l+=c<20?1518500249+(i&o|~i&s):c<40?1859775393+(i^o^s):c<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}}),r.SHA1=s._createHelper(c),r.HmacSHA1=s._createHmacHelper(c),f.SHA1)},function(t,e,n){var r,i,o,s;t.exports=(r=n(3),o=(i=r).lib.Base,s=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=s.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),a=i.words,u=o.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))},function(t,e){},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(10),i=n(103),o=n(105),s=n(106),a=n(107),u=n(62);t.exports=function(t){return new Promise((function(e,c){var f=t.data,l=t.headers;r.isFormData(f)&&delete l["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";l.Authorization="Basic "+btoa(p+":"+d)}if(h.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?s(h.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:t,request:h};i(e,c,r),h=null}},h.onerror=function(){c(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var _=n(108),y=(t.withCredentials||a(t.url))&&t.xsrfCookieName?_.read(t.xsrfCookieName):void 0;y&&(l[t.xsrfHeaderName]=y)}if("setRequestHeader"in h&&r.forEach(l,(function(t,e){void 0===f&&"content-type"===e.toLowerCase()?delete l[e]:h.setRequestHeader(e,t)})),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),c(t),h=null)})),void 0===f&&(f=null),h.send(f)}))}},function(t,e,n){"use strict";var r=n(104);t.exports=function(t,e,n,i,o){var s=new Error(t);return r(s,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e,n){"use strict";(function(e){var r=n(51),i=n(36).Readable,o={objectMode:!0},s={clean:!0},a=n(133);function u(t){if(!(this instanceof u))return new u(t);this.options=t||{},this.options=r(s,t),this._inflights=new a}u.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this},u.prototype.createStream=function(){var t=new i(o),n=!1,r=[],s=0;return this._inflights.forEach((function(t,e){r.push(t)})),t._read=function(){!n&&s<r.length?this.push(r[s++]):this.push(null)},t.destroy=function(){if(!n){var t=this;n=!0,e.nextTick((function(){t.emit("close")}))}},t},u.prototype.del=function(t,e){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error("missing packet")),this},u.prototype.get=function(t,e){return(t=this._inflights.get(t.messageId))?e(null,t):e&&e(new Error("missing packet")),this},u.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},t.exports=u}).call(this,n(8))},function(t,e,n){"use strict";(function(e,r){var i=n(32);t.exports=g;var o,s=n(69);g.ReadableState=v;n(19).EventEmitter;var a=function(t,e){return t.listeners(e).length},u=n(70),c=n(12).Buffer,f=e.Uint8Array||function(){};var l=Object.create(n(34));l.inherits=n(16);var h=n(126),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var d,_=n(127),y=n(71);l.inherits(g,u);var b=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var r=e instanceof(o=o||n(21));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(73).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function g(t){if(o=o||n(21),!(this instanceof g))return new g(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function m(t,e,n,r,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}(t,s)):(i||(o=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof f||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):k(t,s)):w(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),k(t,e)}Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),g.prototype.destroy=y.destroy,g.prototype._undestroy=y.undestroy,g.prototype._destroy=function(t,e){this.push(null),e(t)},g.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),m(this,t,e,!1,n)},g.prototype.unshift=function(t){return m(this,t,null,!0,!1)},g.prototype.isPaused=function(){return!1===this._readableState.flowing},g.prototype.setEncoding=function(t){return d||(d=n(73).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(I,t):I(t))}function I(t){p("emit readable"),t.emit("readable"),x(t)}function k(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(O,t,e))}function O(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function A(t){p("readable nexttick read 0"),t.read(0)}function T(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),x(t),e.flowing&&!e.reading&&t.read(0)}function x(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function C(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(R,e,t))}function R(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function j(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}g.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?C(this):S(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&C(this),null;var r,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(n,e))),null===(r=t>0?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&C(this)),null!==r&&this.emit("data",r),r},g.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},g.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?f:g;function c(e,r){p("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),t.removeListener("close",b),t.removeListener("finish",v),t.removeListener("drain",l),t.removeListener("error",y),t.removeListener("unpipe",c),n.removeListener("end",f),n.removeListener("end",g),n.removeListener("data",_),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function f(){p("onend"),t.end()}o.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",c);var l=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,x(t))}}(n);t.on("drain",l);var h=!1;var d=!1;function _(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==j(o.pipes,t))&&!h&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function y(e){p("onerror",e),g(),t.removeListener("error",y),0===a(t,"error")&&t.emit("error",e)}function b(){t.removeListener("finish",v),g()}function v(){p("onfinish"),t.removeListener("close",b),g()}function g(){p("unpipe"),n.unpipe(t)}return n.on("data",_),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",y),t.once("close",b),t.once("finish",v),t.emit("pipe",n),o.flowing||(p("pipe resume"),n.resume()),t},g.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=j(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},g.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):i.nextTick(A,this))}return n},g.prototype.addListener=g.prototype.on,g.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(T,t,e))}(this,t)),this},g.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},g.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<b.length;o++)t.on(b[o],this.emit.bind(this,b[o]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),g._fromList=P}).call(this,n(11),n(8))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(19).EventEmitter},function(t,e,n){"use strict";var r=n(32);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";(function(e,r,i){var o=n(32);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var a,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;v.WritableState=b;var c=Object.create(n(34));c.inherits=n(16);var f={deprecate:n(131)},l=n(70),h=n(12).Buffer,p=i.Uint8Array||function(){};var d,_=n(71);function y(){}function b(t,e){a=a||n(21),t=t||{};var r=e instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(I,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),I(t,e))}(t,n,r,e,i);else{var s=E(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),r?u(m,t,n,s,i):m(t,n,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(t){if(a=a||n(21),!(d.call(v,this)||this instanceof a))return new v(t);this._writableState=new b(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),l.call(this)}function g(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),I(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,g(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,f=n.encoding,l=n.callback;if(g(t,e,!1,e.objectMode?1:c.length,c,f,l),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),I(t,e)}))}function I(t,e){var n=E(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(v,l),b.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(b.prototype,"buffer",{get:f.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===v&&(t&&t._writableState instanceof b)}})):d=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,n){var r,i=this._writableState,s=!1,a=!i.objectMode&&(r=t,h.isBuffer(r)||r instanceof p);return a&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=y),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(r,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else g(t,e,!1,a,r,i,o);return u}(this,i,a,t,e,n)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,I(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=_.destroy,v.prototype._undestroy=_.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(8),n(129).setImmediate,n(11))},function(t,e,n){"use strict";var r=n(12).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=f,this.end=l,e=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function f(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=s;var r=n(21),i=Object.create(n(34));function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){u(t,e,n)})):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(16),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){"use strict";var r=n(17);t.exports=function(){return r(this).length=0,this}},function(t,e,n){"use strict";var r=n(141),i=Math.max;t.exports=function(t){return i(0,r(t))}},function(t,e,n){"use strict";var r=Object.create,i=Object.getPrototypeOf,o={};t.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||r;return"function"==typeof t&&i(t(e(null),o))===o}},function(t,e,n){"use strict";var r,i=n(145),o=n(17),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(t,e){if(o(t),null===e||i(e))return t;throw new TypeError("Prototype must be null or an object")},t.exports=function(t){var e,n;return t?(2===t.level?t.set?(n=t.set,e=function(t,e){return n.call(r(t,e),e),t}):e=function(t,e){return r(t,e).__proto__=e,t}:e=function t(e,n){var i;return r(e,n),(i=s.call(t.nullPolyfill,e))&&delete t.nullPolyfill.__proto__,null===n&&(n=t.nullPolyfill),e.__proto__=n,i&&a(t.nullPolyfill,"__proto__",u),e},Object.defineProperty(e,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var t,e=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(t=r.set).call(e,n)}catch(t){}if(Object.getPrototypeOf(e)===n)return{set:t,level:2}}return e.__proto__=n,Object.getPrototypeOf(e)===n?{level:2}:((e={}).__proto__=n,Object.getPrototypeOf(e)===n&&{level:1})}()),n(146)},function(t,e,n){"use strict";var r=n(147),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;t.exports=function(t){return!!r(t)&&!i.test(o.call(t))}},function(t,e,n){"use strict";var r=n(24),i=Array.prototype.forEach,o=Object.create,s=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(t){var e=o(null);return i.call(arguments,(function(t){r(t)&&s(Object(t),e)})),e}},function(t,e,n){"use strict";t.exports=n(154)()?String.prototype.contains:n(155)},function(t,e,n){"use strict";var r=n(161);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e,n){"use strict";var r=n(165);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not iterable");return t}},function(t,e,n){"use strict";var r=n(25),i=n(52),o=n(171),s=n(172),a=function(t,e){return t.replace("%v",s(e))};t.exports=function(t,e,n){if(!i(n))throw new TypeError(a(e,t));if(!r(t)){if("default"in n)return n.default;if(n.isOptional)return null}var s=o(n.errorMessage);throw r(s)||(s=e),new TypeError(a(s,t))}},function(t,e,n){(function(e){var r=n(188),i=function(){},o=function(t,n,s){if("function"==typeof n)return o(t,null,n);n||(n={}),s=r(s||i);var a=t._writableState,u=t._readableState,c=n.readable||!1!==n.readable&&t.readable,f=n.writable||!1!==n.writable&&t.writable,l=!1,h=function(){t.writable||p()},p=function(){f=!1,c||s.call(t)},d=function(){c=!1,f||s.call(t)},_=function(e){s.call(t,e?new Error("exited with error code: "+e):null)},y=function(e){s.call(t,e)},b=function(){e.nextTick(v)},v=function(){if(!l)return(!c||u&&u.ended&&!u.destroyed)&&(!f||a&&a.ended&&!a.destroyed)?void 0:s.call(t,new Error("premature close"))},g=function(){t.req.on("finish",p)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(t)?f&&!a&&(t.on("end",h),t.on("close",h)):(t.on("complete",p),t.on("abort",b),t.req?g():t.on("request",g)),function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length}(t)&&t.on("exit",_),t.on("end",d),t.on("finish",p),!1!==n.error&&t.on("error",y),t.on("close",b),function(){l=!0,t.removeListener("complete",p),t.removeListener("abort",b),t.removeListener("request",g),t.req&&t.req.removeListener("finish",p),t.removeListener("end",h),t.removeListener("close",h),t.removeListener("finish",p),t.removeListener("exit",_),t.removeListener("end",d),t.removeListener("error",y),t.removeListener("close",b)}};t.exports=o}).call(this,n(8))},function(t,e,n){"use strict";var r=n(12).Buffer,i=t.exports;for(var o in i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},i.codes={},i.types){var s=i.types[o];i.codes[s]=o}function a(t){return[0,1,2].map((function(e){return[0,1].map((function(n){return[0,1].map((function(o){var s=new r(1);return s.writeUInt8(i.codes[t]<<i.CMD_SHIFT|(n?i.DUP_MASK:0)|e<<i.QOS_SHIFT|o,0,!0),s}))}))}))}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.LENGTH_MASK=127,i.LENGTH_FIN_MASK=128,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=r.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=r.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=r.from([i.codes.connect<<i.CMD_SHIFT]),i.PUBLISH_HEADER=a("publish"),i.SUBSCRIBE_HEADER=a("subscribe"),i.UNSUBSCRIBE_HEADER=a("unsubscribe"),i.ACKS={unsuback:a("unsuback"),puback:a("puback"),pubcomp:a("pubcomp"),pubrel:a("pubrel"),pubrec:a("pubrec")},i.SUBACK_HEADER=r.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=r.from([3]),i.VERSION4=r.from([4]),i.QOS=[0,1,2].map((function(t){return r.from([t])})),i.EMPTY={pingreq:r.from([i.codes.pingreq<<4,0]),pingresp:r.from([i.codes.pingresp<<4,0]),disconnect:r.from([i.codes.disconnect<<4,0])}},function(t,e,n){"use strict";var r=n(86),i=n(12).Buffer,o=i.allocUnsafe(0),s=i.from([0]),a=n(196),u=n(32).nextTick,c=a.cache,f=a.generateNumber,l=a.generateCache,h=g,p=!0;function d(t,e){switch(e.cork&&(e.cork(),u(_,e)),p&&(p=!1,l()),t.cmd){case"connect":return function(t,e){var n=t||{},o=n.protocolId||"MQTT",s=n.protocolVersion||4,a=n.will,u=n.clean,c=n.keepalive||0,f=n.clientId||"",l=n.username,p=n.password;void 0===u&&(u=!0);var d=0;if(!o||"string"!=typeof o&&!i.isBuffer(o))return e.emit("error",new Error("Invalid protocolId")),!1;d+=o.length+2;if(3!==s&&4!==s)return e.emit("error",new Error("Invalid protocol version")),!1;d+=1;if("string"!=typeof f&&!i.isBuffer(f)||!f&&4!==s||!f&&!u){if(s<4)return e.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*u==0)return e.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else d+=f.length+2;if("number"!=typeof c||c<0||c>65535||c%1!=0)return e.emit("error",new Error("Invalid keepalive")),!1;d+=2;if(d+=1,a){if("object"!=typeof a)return e.emit("error",new Error("Invalid will")),!1;if(!a.topic||"string"!=typeof a.topic)return e.emit("error",new Error("Invalid will topic")),!1;if(d+=i.byteLength(a.topic)+2,a.payload&&a.payload){if(!(a.payload.length>=0))return e.emit("error",new Error("Invalid will payload")),!1;"string"==typeof a.payload?d+=i.byteLength(a.payload)+2:d+=a.payload.length+2}else d+=2}var _=!1;if(null!=l){if(!S(l))return e.emit("error",new Error("Invalid username")),!1;_=!0,d+=i.byteLength(l)+2}if(null!=p){if(!_)return e.emit("error",new Error("Username is required to use password")),!1;if(!S(p))return e.emit("error",new Error("Invalid password")),!1;d+=E(p)+2}e.write(r.CONNECT_HEADER),b(e,d),w(e,o),e.write(4===s?r.VERSION4:r.VERSION3);var y=0;y|=null!=l?r.USERNAME_MASK:0,y|=null!=p?r.PASSWORD_MASK:0,y|=a&&a.retain?r.WILL_RETAIN_MASK:0,y|=a&&a.qos?a.qos<<r.WILL_QOS_SHIFT:0,y|=a?r.WILL_FLAG_MASK:0,y|=u?r.CLEAN_SESSION_MASK:0,e.write(i.from([y])),h(e,c),w(e,f),a&&(v(e,a.topic),w(e,a.payload));null!=l&&w(e,l);null!=p&&w(e,p);return!0}(t,e);case"connack":return function(t,e){var n=(t||{}).returnCode;if("number"!=typeof n)return e.emit("error",new Error("Invalid return code")),!1;return e.write(r.CONNACK_HEADER),b(e,2),e.write(t.sessionPresent?r.SESSIONPRESENT_HEADER:s),e.write(i.from([n]))}(t,e);case"publish":return function(t,e){var n=t||{},s=n.qos||0,a=n.retain?r.RETAIN_MASK:0,u=n.topic,c=n.payload||o,f=n.messageId,l=0;if("string"==typeof u)l+=i.byteLength(u)+2;else{if(!i.isBuffer(u))return e.emit("error",new Error("Invalid topic")),!1;l+=u.length+2}i.isBuffer(c)?l+=c.length:l+=i.byteLength(c);if(s&&"number"!=typeof f)return e.emit("error",new Error("Invalid messageId")),!1;s&&(l+=2);e.write(r.PUBLISH_HEADER[s][t.dup?1:0][a?1:0]),b(e,l),h(e,E(u)),e.write(u),s>0&&h(e,f);return e.write(c)}(t,e);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return function(t,e){var n=t||{},i=n.cmd||"puback",o=n.messageId,s=n.dup&&"pubrel"===i?r.DUP_MASK:0,a=0;"pubrel"===i&&(a=1);if("number"!=typeof o)return e.emit("error",new Error("Invalid messageId")),!1;return e.write(r.ACKS[i][a][s][0]),b(e,2),h(e,o)}(t,e);case"subscribe":return function(t,e){var n=t||{},o=n.dup?r.DUP_MASK:0,s=n.messageId,a=n.subscriptions,u=0;if("number"!=typeof s)return e.emit("error",new Error("Invalid messageId")),!1;u+=2;if("object"!=typeof a||!a.length)return e.emit("error",new Error("Invalid subscriptions")),!1;for(var c=0;c<a.length;c+=1){var f=a[c].topic,l=a[c].qos;if("string"!=typeof f)return e.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof l)return e.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;u+=i.byteLength(f)+2+1}e.write(r.SUBSCRIBE_HEADER[1][o?1:0][0]),b(e,u),h(e,s);for(var p=!0,d=0;d<a.length;d++){var _=a[d],y=_.topic,g=_.qos;v(e,y),p=e.write(r.QOS[g])}return p}(t,e);case"suback":return function(t,e){var n=t||{},o=n.messageId,s=n.granted,a=0;if("number"!=typeof o)return e.emit("error",new Error("Invalid messageId")),!1;a+=2;if("object"!=typeof s||!s.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(var u=0;u<s.length;u+=1){if("number"!=typeof s[u])return e.emit("error",new Error("Invalid qos vector")),!1;a+=1}return e.write(r.SUBACK_HEADER),b(e,a),h(e,o),e.write(i.from(s))}(t,e);case"unsubscribe":return function(t,e){var n=t||{},o=n.messageId,s=n.dup?r.DUP_MASK:0,a=n.unsubscriptions,u=0;if("number"!=typeof o)return e.emit("error",new Error("Invalid messageId")),!1;u+=2;if("object"!=typeof a||!a.length)return e.emit("error",new Error("Invalid unsubscriptions")),!1;for(var c=0;c<a.length;c+=1){if("string"!=typeof a[c])return e.emit("error",new Error("Invalid unsubscriptions")),!1;u+=i.byteLength(a[c])+2}e.write(r.UNSUBSCRIBE_HEADER[1][s?1:0][0]),b(e,u),h(e,o);for(var f=!0,l=0;l<a.length;l++)f=v(e,a[l]);return f}(t,e);case"pingreq":case"pingresp":case"disconnect":return function(t,e){return e.write(r.EMPTY[t.cmd])}(t,e);default:return e.emit("error",new Error("Unknown command")),!1}}function _(t){t.uncork()}Object.defineProperty(d,"cacheNumbers",{get:function(){return h===g},set:function(t){t?(c&&0!==Object.keys(c).length||(p=!0),h=g):(p=!1,h=m)}});var y={};function b(t,e){var n=y[e];n||(n=function(t){var e=0,n=0,r=i.allocUnsafe(function(t){return t>=0&&t<128?1:t>=128&&t<16384?2:t>=16384&&t<2097152?3:t>=2097152&&t<268435456?4:0}(t));do{e=t%128|0,(t=t/128|0)>0&&(e|=128),r.writeUInt8(e,n++)}while(t>0);return r}(e),e<16384&&(y[e]=n)),t.write(n)}function v(t,e){var n=i.byteLength(e);h(t,n),t.write(e,"utf8")}function g(t,e){return t.write(c[e])}function m(t,e){return t.write(f(e))}function w(t,e){"string"==typeof e?v(t,e):e?(h(t,e.length),t.write(e)):h(t,0)}function E(t){return t?t instanceof i?t.length:i.byteLength(t):0}function S(t){return"string"==typeof t||t instanceof i}t.exports=d},function(t,e,n){"use strict";var r=n(199),i=n(201);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=g,e.resolve=function(t,e){return g(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?g(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=g(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),f=["'"].concat(c),l=["%","/","?",";","#"].concat(f),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(202);function g(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var g=t=c.join(a);if(g=g.trim(),!n&&1===t.split("#").length){var m=u.exec(g);if(m)return this.path=g,this.href=g,this.pathname=m[1],m[2]?(this.search=m[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(g);if(w){var E=(w=w[0]).toLowerCase();this.protocol=E,g=g.substr(w.length)}if(n||w||g.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===g.substr(0,2);!S||w&&y[w]||(g=g.substr(2),this.slashes=!0)}if(!y[w]&&(S||w&&!b[w])){for(var I,k,O=-1,A=0;A<h.length;A++){-1!==(T=g.indexOf(h[A]))&&(-1===O||T<O)&&(O=T)}-1!==(k=-1===O?g.lastIndexOf("@"):g.lastIndexOf("@",O))&&(I=g.slice(0,k),g=g.slice(k+1),this.auth=decodeURIComponent(I)),O=-1;for(A=0;A<l.length;A++){var T;-1!==(T=g.indexOf(l[A]))&&(-1===O||T<O)&&(O=T)}-1===O&&(O=g.length),this.host=g.slice(0,O),g=g.slice(O),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var P=this.hostname.split(/\./),C=(A=0,P.length);A<C;A++){var R=P[A];if(R&&!R.match(p)){for(var j="",N=0,D=R.length;N<D;N++)R.charCodeAt(N)>127?j+="x":j+=R[N];if(!j.match(p)){var M=P.slice(0,A),L=P.slice(A+1),B=R.match(d);B&&(M.push(B[1]),L.unshift(B[2])),L.length&&(g="/"+L.join(".")+g),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+U,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==g[0]&&(g="/"+g))}if(!_[E])for(A=0,C=f.length;A<C;A++){var H=f[A];if(-1!==g.indexOf(H)){var F=encodeURIComponent(H);F===H&&(F=escape(H)),g=g.split(H).join(F)}}var V=g.indexOf("#");-1!==V&&(this.hash=g.substr(V),g=g.slice(0,V));var z=g.indexOf("?");if(-1!==z?(this.search=g.substr(z),this.query=g.substr(z+1),e&&(this.query=v.parse(this.query)),g=g.slice(0,z)):e&&(this.search="",this.query={}),g&&(this.pathname=g),b[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var K=this.search||"";this.path=U+K}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||b[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(g(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var f=u[c];"protocol"!==f&&(n[f]=t[f])}return b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!b[t.protocol]){for(var l=Object.keys(t),h=0;h<l.length;h++){var p=l[h];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var _=n.pathname||"",v=n.search||"";n.path=_+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=m||g||n.host&&t.pathname,E=w,S=n.pathname&&n.pathname.split("/")||[],I=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!b[n.protocol]);if(I&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===S[0])),m)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(I)n.hostname=n.host=S.shift(),(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var k=S.slice(-1)[0],O=(n.host||t.host||S.length>1)&&("."===k||".."===k)||""===k,A=0,T=S.length;T>=0;T--)"."===(k=S[T])?S.splice(T,1):".."===k?(S.splice(T,1),A++):A&&(S.splice(T,1),A--);if(!w&&!E)for(;A--;A)S.unshift("..");!w||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),O&&"/"!==S.join("/").substr(-1)&&S.push("");var x,P=""===S[0]||S[0]&&"/"===S[0].charAt(0);I&&(n.hostname=n.host=P?"":S.length?S.shift():"",(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift()));return(w=w||n.host&&S.length)&&!P&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";var r=n(205);t.exports=function(t,e){var n,i;return e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",n=e.port,i=e.hostname,r.createConnection(n,i)}},function(t,e,n){"use strict";var r=!1,i=[];function o(t){r?wx.sendSocketMessage({data:t.buffer||t}):i.push(t)}var s=n(56);function a(t,e){var n="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);var a=function(t,e){var n="wxs"===t.protocol?"wss":"ws",r=n+"://"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(r=n+"://"+t.hostname+":"+t.port+t.path),"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}(e,t);return s(function(t,e){var n={OPEN:1,CLOSING:2,CLOSED:3,readyState:r?1:0,send:o,close:wx.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return wx.connectSocket({url:t,protocols:e}),wx.onSocketOpen((function(t){n.readyState=n.OPEN,r=!0;for(var e=0;e<i.length;e++)o(i[e]);i=[],n.onopen&&n.onopen.apply(n,arguments)})),wx.onSocketMessage((function(t){n.onmessage&&n.onmessage.apply(n,arguments)})),wx.onSocketClose((function(){n.onclose&&n.onclose.apply(n,arguments),n.readyState=n.CLOSED,r=!1})),wx.onSocketError((function(){n.onerror&&n.onerror.apply(n,arguments),n.readyState=n.CLOSED,r=!1})),n}(a,[n]))}t.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");return a(t,e)}},function(t,e,n){"use strict";(function(e){var r=n(56),i=n(88),o=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],s="browser"===e.title;function a(t,e){var n="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.port||("wss"===t.protocol?t.port=443:t.port=80),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={}),s||"wss"!==t.protocol||o.forEach((function(e){t.hasOwnProperty(e)&&!t.wsOptions.hasOwnProperty(e)&&(t.wsOptions[e]=t[e])}))}(e);var i=function(t,e){var n=t.protocol+"://"+t.hostname+":"+t.port+t.path;return"function"==typeof t.transformWsUrl&&(n=t.transformWsUrl(n,t,e)),n}(e,t);return r(i,[n],e.wsOptions)}t.exports=s?function(t,e){if(e.hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var n=i.parse(document.URL);e.hostname=n.hostname,e.port||(e.port=n.port)}return a(t,e)}:function(t,e){return a(t,e)}}).call(this,n(8))},function(t,e,n){var r;t.exports=(r=n(3),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.algo,a=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(a[i]=n(t.pow(r,.5))),u[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],f=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],f=n[5],l=n[6],h=n[7],p=0;p<64;p++){if(p<16)c[p]=0|t[e+p];else{var d=c[p-15],_=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=c[p-2],b=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[p]=_+c[p-7]+b+c[p-16]}var v=r&i^r&o^i&o,g=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),m=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&f^~a&l)+u[p]+c[p];h=l,l=f,f=a,a=s+m|0,s=o,o=i,i=r,r=m+(g+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+f|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(f),e.HmacSHA256=o._createHmacHelper(f)}(Math),r.SHA256)},function(t,e,n){var r;t.exports=(r=n(3),n(41),function(){var t=r,e=t.lib.Hasher,n=t.x64,i=n.Word,o=n.WordArray,s=t.algo;function a(){return i.create.apply(i,arguments)}var u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=a()}();var f=s.SHA512=e.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],f=n[5],l=n[6],h=n[7],p=r.high,d=r.low,_=i.high,y=i.low,b=o.high,v=o.low,g=s.high,m=s.low,w=a.high,E=a.low,S=f.high,I=f.low,k=l.high,O=l.low,A=h.high,T=h.low,x=p,P=d,C=_,R=y,j=b,N=v,D=g,M=m,L=w,B=E,U=S,q=I,H=k,F=O,V=A,z=T,K=0;K<80;K++){var W=c[K];if(K<16)var G=W.high=0|t[e+2*K],Y=W.low=0|t[e+2*K+1];else{var Q=c[K-15],J=Q.high,X=Q.low,$=(J>>>1|X<<31)^(J>>>8|X<<24)^J>>>7,Z=(X>>>1|J<<31)^(X>>>8|J<<24)^(X>>>7|J<<25),tt=c[K-2],et=tt.high,nt=tt.low,rt=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,it=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),ot=c[K-7],st=ot.high,at=ot.low,ut=c[K-16],ct=ut.high,ft=ut.low;G=(G=(G=$+st+((Y=Z+at)>>>0<Z>>>0?1:0))+rt+((Y+=it)>>>0<it>>>0?1:0))+ct+((Y+=ft)>>>0<ft>>>0?1:0),W.high=G,W.low=Y}var lt,ht=L&U^~L&H,pt=B&q^~B&F,dt=x&C^x&j^C&j,_t=P&R^P&N^R&N,yt=(x>>>28|P<<4)^(x<<30|P>>>2)^(x<<25|P>>>7),bt=(P>>>28|x<<4)^(P<<30|x>>>2)^(P<<25|x>>>7),vt=(L>>>14|B<<18)^(L>>>18|B<<14)^(L<<23|B>>>9),gt=(B>>>14|L<<18)^(B>>>18|L<<14)^(B<<23|L>>>9),mt=u[K],wt=mt.high,Et=mt.low,St=V+vt+((lt=z+gt)>>>0<z>>>0?1:0),It=bt+_t;V=H,z=F,H=U,F=q,U=L,q=B,L=D+(St=(St=(St=St+ht+((lt+=pt)>>>0<pt>>>0?1:0))+wt+((lt+=Et)>>>0<Et>>>0?1:0))+G+((lt+=Y)>>>0<Y>>>0?1:0))+((B=M+lt|0)>>>0<M>>>0?1:0)|0,D=j,M=N,j=C,N=R,C=x,R=P,x=St+(yt+dt+(It>>>0<bt>>>0?1:0))+((P=lt+It|0)>>>0<lt>>>0?1:0)|0}d=r.low=d+P,r.high=p+x+(d>>>0<P>>>0?1:0),y=i.low=y+R,i.high=_+C+(y>>>0<R>>>0?1:0),v=o.low=v+N,o.high=b+j+(v>>>0<N>>>0?1:0),m=s.low=m+M,s.high=g+D+(m>>>0<M>>>0?1:0),E=a.low=E+B,a.high=w+L+(E>>>0<B>>>0?1:0),I=f.low=I+q,f.high=S+U+(I>>>0<q>>>0?1:0),O=l.low=O+F,l.high=k+H+(O>>>0<F>>>0?1:0),T=h.low=T+z,h.high=A+V+(T>>>0<z>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(f),t.HmacSHA512=e._createHmacHelper(f)}(),r.SHA512)},function(t,e,n){t.exports=n(99)},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(14),i=n(4),o=n(1),s=n(0),a=n(2);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _,y,b,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(_,t);var e,n,r,i,u=(e=_,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function _(){return c(this,_),u.apply(this,arguments)}return n=_,i=[{key:"upload",value:function(t,e,n,r){return Object(a.a)(r,(function(r){if(!(t instanceof File))return function(t){throw t}(new Error(o.a.INVALID_FILE_OBJECT));var i=t.type.split("/").shift();if(!["image","video","audio"].includes(i))return function(t){throw t}(new Error(o.a.INVALID_FILE_TYPE));_.__getMetaData(t,e,n,(function(e,n){if(e)return r(e);var i=_.__getRequestUploadUrlData(n);_.__requestUploadUrl(i,(function(e,i){if(e)return r(e);var o=[];if(o.push(s.a.request(i.uploadUrl,{method:"put",data:t,absolute:!0,noAuth:!0,headers:{"Content-Type":t.type}})),i.uploadThumbnailUrl){var a=n.thumbnailFile;o.push(s.a.request(i.uploadThumbnailUrl,{method:"put",data:a,absolute:!0,noAuth:!0,headers:{"Content-Type":a.type}}))}Promise.all(o).then((function(t){return n.fileUrl=i.fileUrl,n.thumbnailUrl=i.thumbnailUrl,r(null,n)})).catch((function(t){return r(t,null)}))}))}))}))}},{key:"__dataURLtoBlob",value:function(t){for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],r=atob(e[1]),i=r.length,o=new Uint8Array(i);i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})}},{key:"__getMetaData",value:function(t,e,n,r){return Object(a.a)(r,(function(r){var i={name:t.name,mimeType:t.type,extension:t.name.split(".").pop(),attachmentType:e};if(!n)return r(null,i);var o=document.body;if("audio"==e||"video"==e){var s=URL.createObjectURL(t),a=document.createElement("video");a.setAttribute("style","visibility: hidden; display: none; position: absolute;"),a.autoplay=!0,a.controls=!0;var u=document.createElement("source");if(u.setAttribute("src",s),a.appendChild(u),o.appendChild(a),"video"==e)var c=document.createElement("canvas"),f=c.getContext("2d");a.addEventListener("play",(function(){window.setTimeout((function(){return i.duration=1e3*a.duration,"video"==e&&(c.width=180,c.height=180,f.drawImage(a,0,0,180,180),i.thumbnailFile=_.__dataURLtoBlob(c.toDataURL())),a.parentNode.removeChild(a),r(null,i)}),2e3)}))}else{s=URL.createObjectURL(t);var l=document.createElement("img");l.setAttribute("src",s),l.setAttribute("style","visibility: hidden; display: none; position: absolute;"),o.appendChild(l),l.onload=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=180,t.height=180,e.drawImage(l,0,0,180,180),i.thumbnailFile=_.__dataURLtoBlob(t.toDataURL()),o.removeChild(l),r(null,i)}}}))}},{key:"__getRequestUploadUrlData",value:function(t){var e=t.name,n={name:e};if(t.thumbnailFile){var r=e.substring(0,e.lastIndexOf("."));n.thumbnail={name:"".concat(r,"-thumbnail.png")}}return n}},{key:"__requestUploadUrl",value:function(t,e){return Object(a.a)(e,(function(e){t=JSON.stringify(t),s.a.request(_.basePath,{method:"post",data:t,headers:{"Content-Type":"application/json"}}).then((function(t){return e(null,t.data)})).catch((function(t){return e(s.a.error(t))}))}))}}],(r=null)&&f(n.prototype,r),i&&f(n,i),_}(r.a);_=v,y="basePath",b=i.a.BASEPATH_FILES,y in _?Object.defineProperty(_,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):_[y]=b},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(5),i=n(43),o=n(45),s=n(31),a=n(48),u=n(6),c=n(18),f=n(15),l=n(44),h=n(47),p=n(46),d={User:{Service:i.a,Model:u.a,ListQuery:l.a},Conversation:{Service:o.a,Model:c.a,ListQuery:h.a},Message:{Service:s.a,Model:f.a,ListQuery:p.a},PushNotification:{Service:a.a},Client:r.a}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n(23),i=n(2);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=n(119),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.chsocket=e,this.__reconnected=!1}var e,n,a;return e=t,(n=[{key:"connect",value:function(t,e,n){var o=this;return Object(i.a)(n,(function(t){var n=o.__generateClientId(),i=o.chsocket.__client.loginUser,a={topic:o.chsocket.__publicKey+"/users/server/offline",payload:JSON.stringify({userId:i.id,version:"v2"}),qos:0},u={clientId:n,protocol:"wss",host:r.a.AWS_IOT_HOST,accessKeyId:r.a.AWS_ACCESS_KEY,secretKey:r.a.AWS_SECRET_KEY,region:r.a.AWS_REGION,will:a};u=Object.assign(u,e),o.__client=s.device(u),o.__client.on("connect",(function(e){o.chsocket.__onConnected(o.__reconnected),o.__reconnected||t(null,!0)})),o.__client.on("close",(function(t){o.chsocket.__connected&&o.chsocket.__onConnectionLost(t)})),o.__client.on("reconnect",(function(){o.__reconnected=!0})),o.__client.on("error",(function(e){o.__reconnected||t(e)})),o.__client.on("message",(function(t,e,n){var r=JSON.parse(e);o.chsocket.__trigger(t,r)}))}))}},{key:"__disconnect",value:function(){this.__client.end()}},{key:"__subscribe",value:function(t){this.__client.subscribe(t)}},{key:"__publish",value:function(t,e){this.__client.publish(t,e)}},{key:"__generateClientId",value:function(){return"client-"+Math.random().toString(36).substr(2,19)}}])&&o(e.prototype,n),a&&o(e,a),t}(),u=n(1),c=n(9),f=n(6),l=(n(18),n(15));function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"friendAdded",value:function(t,e){return[new f.a(e)]}},{key:"userBlocked",value:function(t,e){var n="blocked"===t.split("/").pop();return[n,n?e.requesterId:e.blockedUserId]}},{key:"userUnblocked",value:function(t,e){var n="unblocked"===t.split("/").pop(),r=new f.a(e);return r.id=e.userId,[n,r]}},{key:"online",value:function(t,e){return e.id=e.userId,[new f.a(e)]}},{key:"offline",value:function(t,e){return e.id=e.userId,[new f.a(e)]}},{key:"messageReceived",value:function(t,e){return[new l.a(e)]}}],(n=null)&&h(e.prototype,n),r&&h(e,r),t}(),d=n(5);function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,t),b(this,"__socketClass",a),b(this,"__socket",void 0),b(this,"__client",void 0),b(this,"__events",{connected:{topic:"connected"},disconnected:{topic:"disconnected"},reconnected:{topic:"reconnected"},"user.friends_added":{topic:"users/[login_user]/friends_added"},"user.friends_removed":{topic:"users/[login_user]/friends_removed"},"user.blocked":{topic:"users/[login_user]/blocked"},"user.unblocked":{topic:"users/[login_user]/unblocked"},online:{topic:"users/online"},offline:{topic:"users/offline"},"conversation.updated":{topic:"users/[login_user]/conversation/updated"},"user.conversation_deleted":{topic:"users/[login_user]/conversation_deleted"},"user.conversation_cleared":{topic:"users/[login_user]/conversation_cleared"},"user.mute_updated":{topic:"users/[login_user]/mute_updated"},"user.joined":{topic:"users/[login_user]/joined"},"user.removed":{topic:"users/[login_user]/removed"},"conversation.members_added":{topic:"users/[login_user]/conversation/members_added"},"conversation.members_removed":{topic:"users/[login_user]/conversation/members_removed"},"conversation.admin_added":{topic:"users/[login_user]/conversation/admin_added"},"conversation.typing":{topic:"users/[login_user]/conversation_typing"},"user.message_created":{topic:"users/[login_user]/message_created"},"user.message_deleted":{topic:"users/[login_user]/message_deleted"},"message.deleted_for_everyone":{topic:"users/[login_user]/messages/deleted_for_everyone"},"conversation.mark_as_read":{topic:"users/[login_user]/conversation/mark_as_read"},"user.total_unread_message_count_updated":{topic:"users/[login_user]/total_unread_message_count_updated"},"user.status_updated":{topic:"users/status_updated"},"user.updated":{topic:"users/updated"}}),b(this,"allowForceResubscribe",!1),b(this,"__baseEvents",["connected","disconnected","reconnected"]),b(this,"__subscribedTopics",{}),b(this,"__preConnectEvents",[]),this.__socket=new this.__socketClass(this),this.__client=new d.a,this.__connected=!1,this.__autoSubscribed=!1,this.__publicKey=e.publicKey}var e,n,r;return e=t,(n=[{key:"connect",value:function(t,e,n){var r=this;return Object(i.a)(n,(function(n){r.__userId=t,r.__socket.connect(t,e,n)}))}},{key:"__onConnected",value:function(t){this.__connected=!0,t?this.__trigger("reconnected",null):this.__trigger("connected",null),this.allowForceResubscribe&&t&&this.__autoSubscribed?this.__resubscribe():this.__autoSubscribed||this.__subscribeAll(),this.__preConnectSubscribe(),this.__setUserOnline()}},{key:"__onConnectionLost",value:function(t){this.__connected=!1,this.__trigger("disconnected",t)}},{key:"__disconnect",value:function(){this.__socket.__disconnect()}},{key:"__validate",value:function(t,e,n){if(!this.__isSupported(t))return function(t){throw t}(new Error(c.a.sprintf(u.a.INVALID_EVENT,t)));if(!this.__hasDependencyVars(t))return!0;this.__events[t].vars.forEach((function(n){if(!e[n])return function(t){throw t}(new Error(c.a.sprintf(u.a.REQUIRED_SOCKET_EVENT_PARAM,n,t)))}));var r="__validate"+this.__capitalize(t);if("function"==typeof this[r]){var i=this[r](t,e);if(i.error)return function(t){throw t}(new Error(i.message))}}},{key:"on",value:function(){var t=Array.prototype.slice.call(arguments,0,arguments.length),e=t.shift(),n=t.pop(),r={};t.length&&this.__hasDependencyVars(e)&&this.__events[e].vars.forEach((function(e){r[e]=t.shift()})),this.__validate(e,r,n),this.__isConnected()||this.__isBaseEvent(e)?this.__subscribe(e,r,n):this.__preConnectAdd(e,r,n)}},{key:"__preConnectAdd",value:function(t,e,n){this.__preConnectEvents.push({event:t,params:e,cb:n})}},{key:"__isBaseEvent",value:function(t){return this.__baseEvents.includes(t)}},{key:"__isConnected",value:function(){return this.__connected}},{key:"__preConnectSubscribe",value:function(){for(var t;t=this.__preConnectEvents.shift();)this.__subscribe(t.event,t.params,t.cb)}},{key:"__getEventTopic",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.__events[t].topic,i=this.__events[t].vars;return Array.isArray(r)?r.map((function(t){return e.__replaceTopicVar(t,i,n)})):this.__replaceTopicVar(r,i,n)}},{key:"__isSubscribed",value:function(t){return this.__subscribedTopics.hasOwnProperty(t)}},{key:"__isSupported",value:function(t){return this.__events.hasOwnProperty(t)}},{key:"__hasDependencyVars",value:function(t){return this.__events[t]&&this.__events[t].hasOwnProperty("vars")&&this.__events[t].vars.length}},{key:"__subscribe",value:function(t,e,n){var r=this,i=this.__getEventTopic(t,e);(Array.isArray(i)?i:[i]).forEach((function(e){r.__isSubscribed(e)||(r.__isBaseEvent(t)||r.__subscribeSocket(e),r.__subscribedTopics[e]={event:t,cb:[]}),n&&"function"==typeof n&&r.__subscribedTopics[e].cb.push(n)}))}},{key:"__subscribeSocket",value:function(t){this.__socket.__subscribe(this.__publicKey+"/"+t)}},{key:"__publishSocket",value:function(t,e){e=this.__addDefaultProperties(e),t=t.replace("[login_user]",this.__userId),this.__socket.__publish(this.__publicKey+"/"+t,JSON.stringify(e))}},{key:"__addDefaultProperties",value:function(t){return Object.assign(t,{version:"v2"})}},{key:"__subscribeAll",value:function(){var t=this;Object.keys(this.__events).forEach((function(e){t.__hasDependencyVars(e)||t.__subscribe(e,null)})),this.__autoSubscribed=!0}},{key:"__resubscribe",value:function(){var t=this;Object.keys(this.__subscribedTopics).forEach((function(e){var n=t.__subscribedTopics[e].event;t.__isBaseEvent(n)||t.__subscribeSocket(e)}))}},{key:"__trigger",value:function(t,e){t=t.replace(this.__publicKey+"/",""),this.__isSubscribed(t)&&this.__subscribedTopics[t].cb.forEach((function(t){t.apply(void 0,[e])}))}},{key:"__processPayload",value:function(t,e){var n=this.__subscribedTopics[t].event;return"function"==typeof p[n]?p[n](t,e):[e]}},{key:"__replaceTopicVar",value:function(t,e,n){return t=t.replace("[login_user]",this.__userId),e&&e.length?(e.forEach((function(e){t=t.replace("["+e+"]",n[e])})),t):t}},{key:"__capitalize",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"__validateUserUpdated",value:function(t,e){return{error:"string"!=typeof e.user_id,message:"User Id should be string"}}},{key:"__setUserOnline",value:function(){this.__publishSocket("users/server/online",{userId:this.__client.loginUser.id})}}])&&y(e.prototype,n),r&&y(e,r),t}()},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"Channelize",(function(){return o})),n.d(e,"core",(function(){return a})),n.d(e,"client",(function(){return u}));var r=n(5),i=n(96);t.Channelize?console.error("ERROR: It appears that you have multiple copies of the Channelize WebSDK in your build!"):t.Channelize={core:i.a,client:r.a};var o=t.Channelize,s=t.Channelize,a=s.core,u=s.client}.call(this,n(11))},function(t,e,n){"use strict";var r=n(10),i=n(60),o=n(101),s=n(49);function a(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var u=a(s);u.Axios=o,u.create=function(t){return a(r.merge(s,t))},u.Cancel=n(64),u.CancelToken=n(114),u.isCancel=n(63),u.all=function(t){return Promise.all(t)},u.spread=n(115),t.exports=u,t.exports.default=u},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,n){"use strict";var r=n(49),i=n(10),o=n(109),s=n(110);function a(t){this.defaults=t,this.interceptors={request:new o,response:new o}}a.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head","options"],(function(t){a.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}})),i.forEach(["post","put","patch"],(function(t){a.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))}})),t.exports=a},function(t,e,n){"use strict";var r=n(10);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},function(t,e,n){"use strict";var r=n(62);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";var r=n(10);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(10),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}})),s):s}},function(t,e,n){"use strict";var r=n(10);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r=n(10);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(10);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,n){"use strict";var r=n(10),i=n(111),o=n(63),s=n(49),a=n(112),u=n(113);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return c(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(c(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var r=n(10);t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(64);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){var r=n(117),i=n(118),o=i;o.v1=r,o.v4=i,t.exports=o},function(t,e,n){var r,i,o=n(65),s=n(66),a=0,u=0;t.exports=function(t,e,n){var c=e&&n||0,f=e||[],l=(t=t||{}).node||r,h=void 0!==t.clockseq?t.clockseq:i;if(null==l||null==h){var p=o();null==l&&(l=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=i=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),_=void 0!==t.nsecs?t.nsecs:u+1,y=d-a+(_-u)/1e4;if(y<0&&void 0===t.clockseq&&(h=h+1&16383),(y<0||d>a)&&void 0===t.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,u=_,i=h;var b=(1e4*(268435455&(d+=122192928e5))+_)%4294967296;f[c++]=b>>>24&255,f[c++]=b>>>16&255,f[c++]=b>>>8&255,f[c++]=255&b;var v=d/4294967296*1e4&268435455;f[c++]=v>>>8&255,f[c++]=255&v,f[c++]=v>>>24&15|16,f[c++]=v>>>16&255,f[c++]=h>>>8|128,f[c++]=255&h;for(var g=0;g<6;++g)f[c+g]=l[g];return e||s(f)}},function(t,e,n){var r=n(65),i=n(66);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||i(s)}},function(t,e,n){t.exports.device=n(50),t.exports.thingShadow=n(241),t.exports.jobs=n(242)},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";(function(e){var r=n(123),i=n(67),o=n(88),s=n(51),a={};function u(t,e){if("object"!=typeof t||e||(e=t,t=null),e=e||{},t){var n=o.parse(t,!0);if(null!=n.port&&(n.port=Number(n.port)),null===(e=s(n,e)).protocol)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(function(t){var e;t.auth&&((e=t.auth.match(/^(.+):(.+)$/))?(t.username=e[1],t.password=e[2]):t.username=t.auth)}(e),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}if(!a[e.protocol]){var i=-1!==["mqtts","wss"].indexOf(e.protocol);e.protocol=["mqtt","mqtts","ws","wss","wx","wxs"].filter((function(t,e){return(!i||e%2!=0)&&"function"==typeof a[t]}))[0]}if(!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");return e.protocol&&(e.defaultProtocol=e.protocol),new r((function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.protocol=e.servers[t._reconnectCount].protocol?e.servers[t._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,t._reconnectCount++),a[e.protocol](t,e)}),e)}"browser"!==e.title?(a.mqtt=n(89),a.tcp=n(89),a.ssl=n(55),a.tls=n(55),a.mqtts=n(55)):(a.wx=n(90),a.wxs=n(90)),a.ws=n(91),a.wss=n(91),t.exports=u,t.exports.connect=u,t.exports.MqttClient=r,t.exports.Store=i}).call(this,n(8))},function(t,e,n){"use strict";(function(e,r){var i=n(19),o=n(67),s=n(85),a=n(190),u=n(36).Writable,c=n(16),f=n(197),l=n(198),h=n(51),p=e.setImmediate||function(t){r.nextTick(t)},d={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0};function _(t,e,n){t.emit("packetsend",e),!a.writeToStream(e,t.stream)&&n?t.stream.once("drain",n):n&&n()}function y(t,e,n){t.outgoingStore.put(e,(function(r){if(r)return n&&n(r);_(t,e,n)}))}function b(){}function v(t,e){var n,r=this;if(!(this instanceof v))return new v(t,e);for(n in this.options=e||{},d)void 0===this.options[n]?this.options[n]=d[n]:this.options[n]=e[n];this.options.clientId="string"==typeof this.options.clientId?this.options.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),this.streamBuilder=t,this.outgoingStore=this.options.outgoingStore||new o,this.incomingStore=this.options.incomingStore||new o,this.queueQoSZero=void 0===this.options.queueQoSZero||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this.on("connect",(function(){if(!this.disconnected){this.connected=!0;var t=this.outgoingStore.createStream();this.once("close",e),t.on("end",(function(){r.removeListener("close",e)})),t.on("error",(function(t){r.removeListener("close",e),r.emit("error",t)})),function e(){if(t){var n,i=t.read(1);i?r.disconnecting||r.reconnectTimer?t.destroy&&t.destroy():(n=r.outgoing[i.messageId],r.outgoing[i.messageId]=function(t,r){n&&n(t,r),e()},r._sendPacket(i)):t.once("readable",e)}}()}function e(){t.destroy(),t=null}})),this.on("close",(function(){this.connected=!1,clearTimeout(this.connackTimer)})),this.on("connect",this._setupPingTimer),this.on("connect",(function(){var t=this.queue;!function e(){var n,i=t.shift();i&&(n=i.packet,r._sendPacket(n,(function(t){i.cb&&i.cb(t),e()})))}()}));var s=!0;this.on("connect",(function(){!s&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),s=!1})),this.on("close",(function(){null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null)})),this.on("close",this._setupReconnect),i.EventEmitter.call(this),this._setupStream()}c(v,i.EventEmitter),v.prototype._setupStream=function(){var t,e=this,n=new u,i=a.parser(this.options),o=null,c=[];function f(){r.nextTick(l)}function l(){var t=c.shift(),n=o;t?e._handlePacket(t,f):(o=null,n())}this._clearReconnect(),this.stream=this.streamBuilder(this),i.on("packet",(function(t){c.push(t)})),n._write=function(t,e,n){o=n,i.parse(t),l()},this.stream.pipe(n),this.stream.on("error",b),s(this.stream,this.emit.bind(this,"close")),(t=Object.create(this.options)).cmd="connect",_(this,t),i.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){e._cleanUp(!0)}),this.options.connectTimeout)},v.prototype._handlePacket=function(t,e){switch(this.emit("packetreceive",t),t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"pingresp":this._handlePingresp(t),e()}},v.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},v.prototype.publish=function(t,e,n,r){var i;"function"==typeof n&&(r=n,n=null);if(n=h({qos:0,retain:!1,dup:!1},n),this._checkDisconnecting(r))return this;switch(i={cmd:"publish",topic:t,payload:e,qos:n.qos,retain:n.retain,messageId:this._nextId(),dup:n.dup},n.qos){case 1:case 2:this.outgoing[i.messageId]=r||b,this._sendPacket(i);break;default:this._sendPacket(i,r)}return this},v.prototype.subscribe=function(){var t,e,n=Array.prototype.slice.call(arguments),r=[],i=n.shift(),o=i.resubscribe,s=n.pop()||b,a=n.pop(),u=this;if(delete i.resubscribe,"string"==typeof i&&(i=[i]),"function"!=typeof s&&(a=s,s=b),null!==(e=l.validateTopics(i)))return p(s,new Error("Invalid topic "+e)),this;if(this._checkDisconnecting(s))return this;var c={qos:0};if(a=h(c,a),Array.isArray(i)?i.forEach((function(t){(u._resubscribeTopics[t]<a.qos||!u._resubscribeTopics.hasOwnProperty(t)||o)&&r.push({topic:t,qos:a.qos})})):Object.keys(i).forEach((function(t){(u._resubscribeTopics[t]<i[t]||!u._resubscribeTopics.hasOwnProperty(t)||o)&&r.push({topic:t,qos:i[t]})})),t={cmd:"subscribe",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:this._nextId()},r.length){if(this.options.resubscribe){var f=[];r.forEach((function(t){u.options.reconnectPeriod>0&&(u._resubscribeTopics[t.topic]=t.qos,f.push(t.topic))})),u.messageIdToTopic[t.messageId]=f}return this.outgoing[t.messageId]=function(t,e){if(!t)for(var n=e.granted,i=0;i<n.length;i+=1)r[i].qos=n[i];s(t,r)},this._sendPacket(t),this}s(null,[])},v.prototype.unsubscribe=function(t,e){var n={cmd:"unsubscribe",qos:1,messageId:this._nextId()},r=this;return e=e||b,this._checkDisconnecting(e)||("string"==typeof t?n.unsubscriptions=[t]:"object"==typeof t&&t.length&&(n.unsubscriptions=t),this.options.resubscribe&&n.unsubscriptions.forEach((function(t){delete r._resubscribeTopics[t]})),this.outgoing[n.messageId]=e,this._sendPacket(n)),this},v.prototype.end=function(t,e){var n=this;function r(){n.disconnected=!0,n.incomingStore.close((function(){n.outgoingStore.close((function(){e&&e.apply(null,arguments),n.emit("end")}))})),n._deferredReconnect&&n._deferredReconnect()}function i(){n._cleanUp(t,p.bind(null,r))}return"function"==typeof t&&(e=t,t=!1),this.disconnecting||(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,i,10)):i()),this},v.prototype.removeOutgoingMessage=function(t){var e=this.outgoing[t];return delete this.outgoing[t],this.outgoingStore.del({messageId:t},(function(){e(new Error("Message removed"))})),this},v.prototype.reconnect=function(t){var e=this,n=function(){t?(e.options.incomingStore=t.incomingStore,e.options.outgoingStore=t.outgoingStore):(e.options.incomingStore=null,e.options.outgoingStore=null),e.incomingStore=e.options.incomingStore||new o,e.outgoingStore=e.options.outgoingStore||new o,e.disconnecting=!1,e.disconnected=!1,e._deferredReconnect=null,e._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=n:n(),this},v.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},v.prototype._setupReconnect=function(){var t=this;!t.disconnecting&&!t.reconnectTimer&&t.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),t.reconnectTimer=setInterval((function(){t._reconnect()}),t.options.reconnectPeriod))},v.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},v.prototype._cleanUp=function(t,e){var n;e&&this.stream.on("close",e),t?(0===this.options.reconnectPeriod&&this.options.clean&&(n=this.outgoing)&&Object.keys(n).forEach((function(t){"function"==typeof n[t]&&(n[t](new Error("Connection closed")),delete n[t])})),this.stream.destroy()):this._sendPacket({cmd:"disconnect"},p.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(this.stream.removeListener("close",e),e())},v.prototype._sendPacket=function(t,e){if(this.connected){switch(this._shiftPingInterval(),t.cmd){case"publish":break;case"pubrel":return void y(this,t,e);default:return void _(this,t,e)}switch(t.qos){case 2:case 1:y(this,t,e);break;case 0:default:_(this,t,e)}}else 0===(t.qos||0)&&this.queueQoSZero||"publish"!==t.cmd?this.queue.push({packet:t,cb:e}):t.qos>0?(e=this.outgoing[t.messageId],this.outgoingStore.put(t,(function(t){if(t)return e&&e(t)}))):e&&e(new Error("No connection to broker"))},v.prototype._setupPingTimer=function(){var t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=f((function(){t._checkPing()}),1e3*this.options.keepalive))},v.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},v.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},v.prototype._handlePingresp=function(){this.pingResp=!0},v.prototype._handleConnack=function(t){var e=t.returnCode;if(clearTimeout(this.connackTimer),0===e)this.reconnecting=!1,this.emit("connect",t);else if(e>0){var n=new Error("Connection refused: "+["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"][e]);n.code=e,this.emit("error",n)}},v.prototype._handlePublish=function(t,e){e=void 0!==e?e:b;var n=t.topic.toString(),r=t.payload,i=t.qos,o=t.messageId,s=this;switch(i){case 2:this.incomingStore.put(t,(function(t){if(t)return e(t);s._sendPacket({cmd:"pubrec",messageId:o},e)}));break;case 1:this.emit("message",n,r,t),this.handleMessage(t,(function(t){if(t)return e(t);s._sendPacket({cmd:"puback",messageId:o},e)}));break;case 0:this.emit("message",n,r,t),this.handleMessage(t,e)}},v.prototype.handleMessage=function(t,e){e()},v.prototype._handleAck=function(t){var e=t.messageId,n=t.cmd,r=null,i=this.outgoing[e],o=this;if(i){switch(n){case"pubcomp":case"puback":delete this.outgoing[e],this.outgoingStore.del(t,i);break;case"pubrec":r={cmd:"pubrel",qos:2,messageId:e},this._sendPacket(r);break;case"suback":if(delete this.outgoing[e],1===t.granted.length&&0!=(128&t.granted[0])){var s=this.messageIdToTopic[e];s&&s.forEach((function(t){delete o._resubscribeTopics[t]}))}i(null,t);break;case"unsuback":delete this.outgoing[e],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},v.prototype._handlePubrel=function(t,e){e=void 0!==e?e:b;var n=t.messageId,r=this,i={cmd:"pubcomp",messageId:n};r.incomingStore.get(t,(function(n,o){n||"pubrel"===o.cmd?r._sendPacket(i,e):(r.emit("message",o.topic,o.payload,o),r.incomingStore.put(t,(function(t){if(t)return e(t);r.handleMessage(o,(function(t){if(t)return e(t);r._sendPacket(i,e)}))})))}))},v.prototype._nextId=function(){var t=this.nextId++;return 65536===this.nextId&&(this.nextId=1),t},v.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},t.exports=v}).call(this,n(11),n(8))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),f=0,l=a>0?s-4:s;for(n=0;n<l;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=255&e;2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[f++]=255&e);1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[f++]=e>>8&255,u[f++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(f(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+t[e+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*_}},function(t,e){},function(t,e,n){"use strict";var r=n(12).Buffer,i=n(128);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(130),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(11))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,s,a,u=1,c={},f=!1,l=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(t){var e=l.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},h.clearImmediate=p}function p(t){delete c[t]}function d(t){if(f)setTimeout(d,0,t);else{var e=c[t];if(e){f=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),f=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(11),n(8))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(11))},function(t,e,n){"use strict";t.exports=o;var r=n(74),i=Object.create(n(34));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(16),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){"use strict";t.exports=n(134)()?Map:n(135)},function(t,e,n){"use strict";t.exports=function(){var t,e;if("function"!=typeof Map)return!1;try{t=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(t){return!1}return"[object Map]"===String(t)&&(3===t.size&&("function"==typeof t.clear&&("function"==typeof t.delete&&("function"==typeof t.entries&&("function"==typeof t.forEach&&("function"==typeof t.get&&("function"==typeof t.has&&("function"==typeof t.keys&&("function"==typeof t.set&&("function"==typeof t.values&&(!1===(e=t.entries().next()).done&&(!!e.value&&("raz"===e.value[0]&&"one"===e.value[1])))))))))))))}},function(t,e,n){"use strict";var r,i=n(75),o=n(137),s=n(37),a=n(22),u=n(17),c=n(13),f=n(156),l=n(20),h=n(83),p=n(166),d=n(184),_=n(187),y=Function.prototype.call,b=Object.defineProperties,v=Object.getPrototypeOf;t.exports=r=function(){var t,e,n,i=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return n=_&&s&&Map!==r?s(new Map,v(this)):this,null!=i&&h(i),b(n,{__mapKeysData__:c("c",t=[]),__mapValuesData__:c("c",e=[])}),i?(p(i,(function(n){var r=u(n)[0];n=n[1],-1===o.call(t,r)&&(t.push(r),e.push(n))}),n),n):n},_&&(s&&s(r,Map),r.prototype=Object.create(Map.prototype,{constructor:c(r)})),f(b(r.prototype,{clear:c((function(){this.__mapKeysData__.length&&(i.call(this.__mapKeysData__),i.call(this.__mapValuesData__),this.emit("_clear"))})),delete:c((function(t){var e=o.call(this.__mapKeysData__,t);return-1!==e&&(this.__mapKeysData__.splice(e,1),this.__mapValuesData__.splice(e,1),this.emit("_delete",e,t),!0)})),entries:c((function(){return new d(this,"key+value")})),forEach:c((function(t){var e,n,r=arguments[1];for(a(t),n=(e=this.entries())._next();void 0!==n;)y.call(t,r,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=e._next()})),get:c((function(t){var e=o.call(this.__mapKeysData__,t);if(-1!==e)return this.__mapValuesData__[e]})),has:c((function(t){return-1!==o.call(this.__mapKeysData__,t)})),keys:c((function(){return new d(this,"key")})),set:c((function(t,e){var n,r=o.call(this.__mapKeysData__,t);return-1===r&&(r=this.__mapKeysData__.push(t)-1,n=!0),this.__mapValuesData__[r]=e,n&&this.emit("_add",r,t),this})),size:c.gs((function(){return this.__mapKeysData__.length})),values:c((function(){return new d(this,"value")})),toString:c((function(){return"[object Map]"}))})),Object.defineProperty(r.prototype,l.iterator,c((function(){return this.entries()}))),Object.defineProperty(r.prototype,l.toStringTag,c("c","Map"))},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){"use strict";var r=n(138),i=n(76),o=n(17),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,u=Math.abs,c=Math.floor;t.exports=function(t){var e,n,f,l;if(!r(t))return s.apply(this,arguments);for(n=i(o(this).length),f=arguments[1],e=f=isNaN(f)?0:f>=0?c(f):i(this.length)-c(u(f));e<n;++e)if(a.call(this,e)&&(l=this[e],r(l)))return e;return-1}},function(t,e,n){"use strict";t.exports=n(139)()?Number.isNaN:n(140)},function(t,e,n){"use strict";t.exports=function(){var t=Number.isNaN;return"function"==typeof t&&(!t({})&&t(NaN)&&!t(34))}},function(t,e,n){"use strict";t.exports=function(t){return t!=t}},function(t,e,n){"use strict";var r=n(142),i=Math.abs,o=Math.floor;t.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?r(t)*o(i(t)):t}},function(t,e,n){"use strict";t.exports=n(143)()?Math.sign:n(144)},function(t,e,n){"use strict";t.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&-1===t(-20))}},function(t,e,n){"use strict";t.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},function(t,e,n){"use strict";var r=n(24),i={function:!0,object:!0};t.exports=function(t){return r(t)&&i[typeof t]||!1}},function(t,e,n){"use strict";var r,i,o,s,a=Object.create;n(77)()||(r=n(78)),t.exports=r?1!==r.level?a:(i={},o={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(t){o[t]="__proto__"!==t?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(i,o),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(t,e){return a(null===t?i:t,e)}):a},function(t,e,n){"use strict";var r=n(148);t.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!r(t)}},function(t,e,n){"use strict";var r=n(52);t.exports=function(t){if(!r(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},function(t,e,n){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var r=n(151),i=n(17),o=Math.max;t.exports=function(t,e){var n,s,a,u=o(arguments.length,2);for(t=Object(i(t)),a=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},s=1;s<u;++s)e=arguments[s],r(e).forEach(a);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=n(152)()?Object.keys:n(153)},function(t,e,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,n){"use strict";var r=n(24),i=Object.keys;t.exports=function(t){return i(r(t)?Object(t):t)}},function(t,e,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(t,e,n){"use strict";var r=String.prototype.indexOf;t.exports=function(t){return r.call(this,t,arguments[1])>-1}},function(t,e,n){"use strict";var r,i,o,s,a,u,c,f=n(13),l=n(22),h=Function.prototype.apply,p=Function.prototype.call,d=Object.create,_=Object.defineProperty,y=Object.defineProperties,b=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};i=function(t,e){var n,i;return l(e),i=this,r.call(this,t,n=function(){o.call(i,t,n),h.call(e,this,arguments)}),n.__eeOnceListener__=e,this},a={on:r=function(t,e){var n;return l(e),b.call(this,"__ee__")?n=this.__ee__:(n=v.value=d(null),_(this,"__ee__",v),v.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:i,off:o=function(t,e){var n,r,i,o;if(l(e),!b.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:s=function(t){var e,n,r,i,o;if(b.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)h.call(r,this,o)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];h.call(i,this,o)}}},u={on:f(r),once:f(i),off:f(o),emit:f(s)},c=y({},u),t.exports=e=function(t){return null==t?d(c):y(Object(t),u)},e.methods=a},function(t,e,n){"use strict";var r=n(38),i={object:!0,symbol:!0};t.exports=function(){var t,e=r.Symbol;if("function"!=typeof e)return!1;t=e("test symbol");try{String(t)}catch(t){return!1}return!!i[typeof e.iterator]&&(!!i[typeof e.toPrimitive]&&!!i[typeof e.toStringTag])}},function(t,e,n){"use strict";t.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},function(t,e){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},function(t,e,n){"use strict";var r,i,o,s=n(13),a=n(82),u=n(38).Symbol,c=n(162),f=n(163),l=n(164),h=Object.create,p=Object.defineProperties,d=Object.defineProperty;if("function"==typeof u)try{String(u()),o=!0}catch(t){}else u=null;i=function(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return r(t)},t.exports=r=function t(e){var n;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return o?u(e):(n=h(i.prototype),e=void 0===e?"":String(e),p(n,{__description__:s("",e),__name__:s("",c(e))}))},f(r),l(r),p(i.prototype,{constructor:s(r),toString:s("",(function(){return this.__name__}))}),p(r.prototype,{toString:s((function(){return"Symbol ("+a(this).__description__+")"})),valueOf:s((function(){return a(this)}))}),d(r.prototype,r.toPrimitive,s("",(function(){var t=a(this);return"symbol"==typeof t?t:t.toString()}))),d(r.prototype,r.toStringTag,s("c","Symbol")),d(i.prototype,r.toStringTag,s("c",r.prototype[r.toStringTag])),d(i.prototype,r.toPrimitive,s("c",r.prototype[r.toPrimitive]))},function(t,e,n){"use strict";t.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},function(t,e,n){"use strict";var r=n(13),i=Object.create,o=Object.defineProperty,s=Object.prototype,a=i(null);t.exports=function(t){for(var e,n,i=0;a[t+(i||"")];)++i;return a[t+=i||""]=!0,o(s,e="@@"+t,r.gs(null,(function(t){n||(n=!0,o(this,e,r(t)),n=!1)}))),e}},function(t,e,n){"use strict";var r=n(13),i=n(38).Symbol;t.exports=function(t){return Object.defineProperties(t,{hasInstance:r("",i&&i.hasInstance||t("hasInstance")),isConcatSpreadable:r("",i&&i.isConcatSpreadable||t("isConcatSpreadable")),iterator:r("",i&&i.iterator||t("iterator")),match:r("",i&&i.match||t("match")),replace:r("",i&&i.replace||t("replace")),search:r("",i&&i.search||t("search")),species:r("",i&&i.species||t("species")),split:r("",i&&i.split||t("split")),toPrimitive:r("",i&&i.toPrimitive||t("toPrimitive")),toStringTag:r("",i&&i.toStringTag||t("toStringTag")),unscopables:r("",i&&i.unscopables||t("unscopables"))})}},function(t,e,n){"use strict";var r=n(13),i=n(82),o=Object.create(null);t.exports=function(t){return Object.defineProperties(t,{for:r((function(e){return o[e]?o[e]:o[e]=t(String(e))})),keyFor:r((function(t){var e;for(e in i(t),o)if(o[e]===t)return e}))})}},function(t,e,n){"use strict";var r=n(39),i=n(24),o=n(40),s=n(20).iterator,a=Array.isArray;t.exports=function(t){return!!i(t)&&(!!a(t)||(!!o(t)||(!!r(t)||"function"==typeof t[s])))}},function(t,e,n){"use strict";var r=n(39),i=n(22),o=n(40),s=n(167),a=Array.isArray,u=Function.prototype.call,c=Array.prototype.some;t.exports=function(t,e){var n,f,l,h,p,d,_,y,b=arguments[2];if(a(t)||r(t)?n="array":o(t)?n="string":t=s(t),i(e),l=function(){h=!0},"array"!==n)if("string"!==n)for(f=t.next();!f.done;){if(u.call(e,b,f.value,l),h)return;f=t.next()}else for(d=t.length,p=0;p<d&&(_=t[p],p+1<d&&(y=_.charCodeAt(0))>=55296&&y<=56319&&(_+=t[++p]),u.call(e,b,_,l),!h);++p);else c.call(t,(function(t){return u.call(e,b,t,l),h}))}},function(t,e,n){"use strict";var r=n(39),i=n(40),o=n(168),s=n(183),a=n(83),u=n(20).iterator;t.exports=function(t){return"function"==typeof a(t)[u]?t[u]():r(t)?new o(t):i(t)?new s(t):new o(t)}},function(t,e,n){"use strict";var r,i=n(37),o=n(81),s=n(13),a=n(20),u=n(54),c=Object.defineProperty;r=t.exports=function(t,e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");u.call(this,t),e=e?o.call(e,"key+value")?"key+value":o.call(e,"key")?"key":"value":"value",c(this,"__kind__",s("",e))},i&&i(r,u),delete r.prototype.constructor,r.prototype=Object.create(u.prototype,{_resolve:s((function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t}))}),c(r.prototype,a.toStringTag,s("c","Array Iterator"))},function(t,e,n){"use strict";var r,i=n(25),o=n(170),s=n(174),a=n(175),u=n(80),c=n(180),f=Function.prototype.bind,l=Object.defineProperty,h=Object.prototype.hasOwnProperty;r=function(t,e,n){var r,i=o(e)&&s(e.value);return delete(r=a(e)).writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&h.call(this,t)?i:(e.value=f.call(i,n.resolveContext?n.resolveContext(this):this),l(this,t,e),this[t])},r},t.exports=function(t){var e=u(arguments[1]);return i(e.resolveContext)&&s(e.resolveContext),c(t,(function(t,n){return r(n,t,e)}))}},function(t,e,n){"use strict";var r=n(84),i=n(25);t.exports=function(t){return i(t)?t:r(t,"Cannot use %v",arguments[1])}},function(t,e,n){"use strict";var r=n(25),i=n(52),o=Object.prototype.toString;t.exports=function(t){if(!r(t))return null;if(i(t)){var e=t.toString;if("function"!=typeof e)return null;if(e===o)return null}try{return""+t}catch(t){return null}}},function(t,e,n){"use strict";var r=n(173),i=/[\n\r\u2028\u2029]/g;t.exports=function(t){var e=r(t);return null===e?"<Non-coercible to string value>":(e.length>100&&(e=e.slice(0,99)+"…"),e=e.replace(i,(function(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},function(t,e,n){"use strict";t.exports=function(t){try{return t.toString()}catch(e){try{return String(t)}catch(t){return null}}}},function(t,e,n){"use strict";var r=n(84),i=n(79);t.exports=function(t){return i(t)?t:r(t,"%v is not a plain function",arguments[1])}},function(t,e,n){"use strict";var r=n(176),i=n(53),o=n(17);t.exports=function(t){var e=Object(o(t)),n=arguments[1],s=Object(arguments[2]);if(e!==t&&!n)return e;var a={};return n?r(n,(function(e){(s.ensure||e in t)&&(a[e]=t[e])})):i(a,t),a}},function(t,e,n){"use strict";t.exports=n(177)()?Array.from:n(178)},function(t,e,n){"use strict";t.exports=function(){var t,e,n=Array.from;return"function"==typeof n&&(e=n(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}},function(t,e,n){"use strict";var r=n(20).iterator,i=n(39),o=n(179),s=n(76),a=n(22),u=n(17),c=n(24),f=n(40),l=Array.isArray,h=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;t.exports=function(t){var e,n,_,y,b,v,g,m,w,E,S=arguments[1],I=arguments[2];if(t=Object(u(t)),c(S)&&a(S),this&&this!==Array&&o(this))e=this;else{if(!S){if(i(t))return 1!==(b=t.length)?Array.apply(null,t):((y=new Array(1))[0]=t[0],y);if(l(t)){for(y=new Array(b=t.length),n=0;n<b;++n)y[n]=t[n];return y}}y=[]}if(!l(t))if(void 0!==(w=t[r])){for(g=a(w).call(t),e&&(y=new e),m=g.next(),n=0;!m.done;)E=S?h.call(S,I,m.value,n):m.value,e?(p.value=E,d(y,n,p)):y[n]=E,m=g.next(),++n;b=n}else if(f(t)){for(b=t.length,e&&(y=new e),n=0,_=0;n<b;++n)E=t[n],n+1<b&&(v=E.charCodeAt(0))>=55296&&v<=56319&&(E+=t[++n]),E=S?h.call(S,I,E,_):E,e?(p.value=E,d(y,_,p)):y[_]=E,++_;b=_}if(void 0===b)for(b=s(t.length),e&&(y=new e(b)),n=0;n<b;++n)E=S?h.call(S,I,t[n],n):t[n],e?(p.value=E,d(y,n,p)):y[n]=E;return e&&(p.value=null,y.length=b),y}},function(t,e,n){"use strict";var r=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);t.exports=function(t){return"function"==typeof t&&i(r.call(t))}},function(t,e,n){"use strict";var r=n(22),i=n(181),o=Function.prototype.call;t.exports=function(t,e){var n={},s=arguments[2];return r(e),i(t,(function(t,r,i,a){n[r]=o.call(e,s,t,r,i,a)})),n}},function(t,e,n){"use strict";t.exports=n(182)("forEach")},function(t,e,n){"use strict";var r=n(22),i=n(17),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,u=Object.prototype.propertyIsEnumerable;t.exports=function(t,e){return function(n,c){var f,l=arguments[2],h=arguments[3];return n=Object(i(n)),r(c),f=a(n),h&&f.sort("function"==typeof h?o.call(h,n):void 0),"function"!=typeof t&&(t=f[t]),s.call(t,f,(function(t,r){return u.call(n,t)?s.call(c,l,n[t],t,n,r):e}))}}},function(t,e,n){"use strict";var r,i=n(37),o=n(13),s=n(20),a=n(54),u=Object.defineProperty;r=t.exports=function(t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");t=String(t),a.call(this,t),u(this,"__length__",o("",t.length))},i&&i(r,a),delete r.prototype.constructor,r.prototype=Object.create(a.prototype,{_next:o((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:o((function(t){var e,n=this.__list__[t];return this.__nextIndex__===this.__length__?n:(e=n.charCodeAt(0))>=55296&&e<=56319?n+this.__list__[this.__nextIndex__++]:n}))}),u(r.prototype,s.toStringTag,o("c","String Iterator"))},function(t,e,n){"use strict";var r,i=n(37),o=n(13),s=n(54),a=n(20).toStringTag,u=n(185),c=Object.defineProperties,f=s.prototype._unBind;r=t.exports=function(t,e){if(!(this instanceof r))return new r(t,e);s.call(this,t.__mapKeysData__,t),e&&u[e]||(e="key+value"),c(this,{__kind__:o("",e),__values__:o("w",t.__mapValuesData__)})},i&&i(r,s),r.prototype=Object.create(s.prototype,{constructor:o(r),_resolve:o((function(t){return"value"===this.__kind__?this.__values__[t]:"key"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__values__[t]]})),_unBind:o((function(){this.__values__=null,f.call(this)})),toString:o((function(){return"[object Map Iterator]"}))}),Object.defineProperty(r.prototype,a,o("c","Map Iterator"))},function(t,e,n){"use strict";t.exports=n(186)("key","value","key+value")},function(t,e,n){"use strict";var r=Array.prototype.forEach,i=Object.create;t.exports=function(t){var e=i(null);return r.call(arguments,(function(t){e[t]=!0})),e}},function(t,e,n){"use strict";t.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},function(t,e,n){var r=n(189);function i(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function o(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}t.exports=r(i),t.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},function(t,e){t.exports=function t(e,n){if(e&&n)return t(e)(n);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){r[t]=e[t]})),r;function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(t){r[t]=i[t]})),r}}},function(t,e,n){"use strict";e.parser=n(191),e.generate=n(195),e.writeToStream=n(87)},function(t,e,n){"use strict";var r=n(192),i=n(16),o=n(19).EventEmitter,s=n(194),a=n(86);function u(){if(!(this instanceof u))return new u;this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}i(u,o),u.prototype._resetState=function(){this.packet=new s,this.error=null,this._list=r(),this._stateCounter=0},u.prototype.parse=function(t){for(this.error&&this._resetState(),this._list.append(t);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},u.prototype._parseHeader=function(){var t=this._list.readUInt8(0);return this.packet.cmd=a.types[t>>a.CMD_SHIFT],this.packet.retain=0!=(t&a.RETAIN_MASK),this.packet.qos=t>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(t&a.DUP_MASK),this._list.consume(1),!0},u.prototype._parseLength=function(){for(var t,e=0,n=1,r=0,i=!0;e<5&&(r+=n*((t=this._list.readUInt8(e++))&a.LENGTH_MASK),n*=128,0!=(t&a.LENGTH_FIN_MASK));)if(this._list.length<=e){i=!1;break}return i&&(this.packet.length=r,this._list.consume(e)),i},u.prototype._parsePayload=function(){var t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this._emitError(new Error("Not supported"))}t=!0}return t},u.prototype._parseConnect=function(){var t,e,n,r,i,o,s={},u=this.packet;if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==t&&"MQIsdp"!==t)return this._emitError(new Error("Invalid protocolId"));if(u.protocolId=t,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(u.protocolVersion=this._list.readUInt8(this._pos),3!==u.protocolVersion&&4!==u.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,s.will&&(u.will={},u.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),u.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),u.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,u.keepalive=this._parseNum(),-1===u.keepalive)return this._emitError(new Error("Packet too short"));if(null===(e=this._parseString()))return this._emitError(new Error("Packet too short"));if(u.clientId=e,s.will){if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(u.will.topic=n,null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));u.will.payload=r}if(s.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));u.username=o}if(s.password){if(null===(i=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));u.password=i}return u},u.prototype._parseConnack=function(){var t=this.packet;return this._list.length<2?null:(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),t.returnCode=this._list.readUInt8(this._pos),-1===t.returnCode?this._emitError(new Error("Cannot parse return code")):void 0)},u.prototype._parsePublish=function(){var t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));t.qos>0&&!this._parseMessageId()||(t.payload=this._list.slice(this._pos,t.length))},u.prototype._parseSubscribe=function(){var t,e,n=this.packet;if(1!==n.qos)return this._emitError(new Error("Wrong subscribe header"));if(n.subscriptions=[],this._parseMessageId())for(;this._pos<n.length;){if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=n.length)return this._emitError(new Error("Malformed Subscribe Payload"));e=this._list.readUInt8(this._pos++),n.subscriptions.push({topic:t,qos:e})}},u.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},u.prototype._parseUnsubscribe=function(){var t=this.packet;if(t.unsubscriptions=[],this._parseMessageId())for(;this._pos<t.length;){var e;if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));t.unsubscriptions.push(e)}},u.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"))},u.prototype._parseMessageId=function(){var t=this.packet;return t.messageId=this._parseNum(),null!==t.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},u.prototype._parseString=function(t){var e,n=this._parseNum(),r=n+this._pos;return-1===n||r>this._list.length||r>this.packet.length?null:(e=this._list.toString("utf8",this._pos,r),this._pos+=n,e)},u.prototype._parseBuffer=function(){var t,e=this._parseNum(),n=e+this._pos;return-1===e||n>this._list.length||n>this.packet.length?null:(t=this._list.slice(this._pos,n),this._pos+=e,t)},u.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var t=this._list.readUInt16BE(this._pos);return this._pos+=2,t},u.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new s,!0},u.prototype._emitError=function(t){this.error=t,this.emit("error",t)},t.exports=u},function(t,e,n){var r=n(193),i=n(35),o=n(12).Buffer;function s(t){if(!(this instanceof s))return new s(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",(function(t){t.on("error",e)})),this.on("unpipe",(function(t){t.removeListener("error",e)}))}else this.append(t);r.call(this)}i.inherits(s,r),s.prototype._offset=function(t){var e,n=0,r=0;if(0===t)return[0,0];for(;r<this._bufs.length;r++){if(t<(e=n+this._bufs[r].length)||r==this._bufs.length-1)return[r,t-n];n=e}},s.prototype.append=function(t){var e=0;if(o.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;e<t.length;e++)this.append(t[e]);else if(t instanceof s)for(;e<t._bufs.length;e++)this.append(t._bufs[e]);else null!=t&&("number"==typeof t&&(t=t.toString()),this._appendBuffer(o.from(t)));return this},s.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},s.prototype._write=function(t,e,n){this._appendBuffer(t),"function"==typeof n&&n()},s.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},s.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype.get=function(t){return this.slice(t,t+1)[0]},s.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},s.prototype.copy=function(t,e,n,r){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof r||r>this.length)&&(r=this.length),n>=this.length)return t||o.alloc(0);if(r<=0)return t||o.alloc(0);var i,s,a=!!t,u=this._offset(n),c=r-n,f=c,l=a&&e||0,h=u[1];if(0===n&&r==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(t,l),l+=this._bufs[s].length;return t}if(f<=this._bufs[u[0]].length-h)return a?this._bufs[u[0]].copy(t,e,h,h+f):this._bufs[u[0]].slice(h,h+f);for(a||(t=o.allocUnsafe(c)),s=u[0];s<this._bufs.length;s++){if(!(f>(i=this._bufs[s].length-h))){this._bufs[s].copy(t,l,h,h+f);break}this._bufs[s].copy(t,l,h),l+=i,f-=i,h&&(h=0)}return t},s.prototype.shallowSlice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var n=this._offset(t),r=this._offset(e),i=this._bufs.slice(n[0],r[0]+1);return 0==r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!=n[1]&&(i[0]=i[0].slice(n[1])),new s(i)},s.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},s.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){for(var t=0,e=new s;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},s.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){s.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),t.exports=s},function(t,e,n){t.exports=n(21)},function(t,e){t.exports=function(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}},function(t,e,n){"use strict";var r=n(12).Buffer,i=n(87),o=n(19).EventEmitter;function s(){this._array=new Array(20),this._i=0}n(16)(s,o),s.prototype.write=function(t){return this._array[this._i++]=t,!0},s.prototype.concat=function(){var t,e,n=0,i=new Array(this._array.length),o=this._array,s=0;for(t=0;t<o.length&&void 0!==o[t];t++)"string"!=typeof o[t]?i[t]=o[t].length:i[t]=r.byteLength(o[t]),n+=i[t];for(e=r.allocUnsafe(n),t=0;t<o.length&&void 0!==o[t];t++)"string"!=typeof o[t]?(o[t].copy(e,s),s+=i[t]):(e.write(o[t],s),s+=i[t]);return e},t.exports=function(t){var e=new s;return i(t,e),e.concat()}},function(t,e,n){"use strict";var r=n(12).Buffer,i={};function o(t){var e=r.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(255&t,1),e}t.exports={cache:i,generateCache:function(){for(var t=0;t<65536;t++)i[t]=o(t)},generateNumber:o}},function(t,e,n){"use strict";function r(t,e,n){var r=this;this._callback=t,this._args=n,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t||(t=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,t,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new r(arguments[0],arguments[1],t)}},function(t,e,n){"use strict";function r(t){for(var e=t.split("/"),n=0;n<e.length;n++)if("+"!==e[n]){if("#"===e[n])return n===e.length-1;if(-1!==e[n].indexOf("+")||-1!==e[n].indexOf("#"))return!1}return!0}t.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(var e=0;e<t.length;e++)if(!r(t[e]))return t[e];return null}}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=/^xn--/,f=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function _(t){throw new RangeError(h[t])}function y(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function b(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+y((t=t.replace(l,".")).split("."),e).join(".")}function v(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function g(t){return y(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=d(t)})).join("")}function m(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))}function E(t){var e,n,r,i,o,s,a,c,f,l,h,d=[],y=t.length,b=0,v=128,m=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&_("not-basic"),d.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=b,s=1,a=36;i>=y&&_("invalid-input"),((c=(h=t.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>p((u-b)/s))&&_("overflow"),b+=c*s,!(c<(f=a<=m?1:a>=m+26?26:a-m));a+=36)s>p(u/(l=36-f))&&_("overflow"),s*=l;m=w(b-o,e=d.length+1,0==o),p(b/e)>u-v&&_("overflow"),v+=p(b/e),b%=e,d.splice(b++,0,v)}return g(d)}function S(t){var e,n,r,i,o,s,a,c,f,l,h,y,b,g,E,S=[];for(y=(t=v(t)).length,e=128,n=0,o=72,s=0;s<y;++s)(h=t[s])<128&&S.push(d(h));for(r=i=S.length,i&&S.push("-");r<y;){for(a=u,s=0;s<y;++s)(h=t[s])>=e&&h<a&&(a=h);for(a-e>p((u-n)/(b=r+1))&&_("overflow"),n+=(a-e)*b,e=a,s=0;s<y;++s)if((h=t[s])<e&&++n>u&&_("overflow"),h==e){for(c=n,f=36;!(c<(l=f<=o?1:f>=o+26?26:f-o));f+=36)E=c-l,g=36-l,S.push(d(m(l+E%g,0))),c=p(E/g);S.push(d(m(c,0))),o=w(n,b,r==i),n=0,++r}++n,++e}return S.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:g},decode:E,encode:S,toASCII:function(t){return b(t,(function(t){return f.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return b(t,(function(t){return c.test(t)?E(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(200)(t),n(11))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(203),e.encode=e.stringify=n(204)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var f=0;f<c;++f){var l,h,p,d,_=t[f].replace(a,"%20"),y=_.indexOf(n);y>=0?(l=_.substr(0,y),h=_.substr(y+1)):(l=_,h=""),p=decodeURIComponent(l),d=decodeURIComponent(h),r(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(r(s))+n;return i(t[s])?o(t[s],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[s]))})).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e){},function(t,e){},function(t,e,n){(function(e,r){var i=n(36),o=n(85),s=n(16),a=n(208),u=e.from&&e.from!==Uint8Array.from?e.from([0]):new e([0]),c=function(t,e){t._corked?t.once("uncork",e):e()},f=function(t,e){return function(n){n?function(t,e){t._autoDestroy&&t.destroy(e)}(t,"premature close"===n.message?null:n):e&&!t._ended&&t.end()}},l=function(t,e,n){if(!(this instanceof l))return new l(t,e,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};s(l,i.Duplex),l.obj=function(t,e,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new l(t,e,n)},l.prototype.cork=function(){1==++this._corked&&this.emit("cork")},l.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},l.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed)t&&t.destroy&&t.destroy();else if(null!==t&&!1!==t){var e=this,n=o(t,{writable:!0,readable:!1},f(this,this._forwardEnd)),i=function(){var t=e._ondrain;e._ondrain=null,t&&t()};this._unwrite&&r.nextTick(i),this._writable=t,this._writable.on("drain",i),this._unwrite=function(){e._writable.removeListener("drain",i),n()},this.uncork()}else this.end()},l.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)t&&t.destroy&&t.destroy();else{if(null===t||!1===t)return this.push(null),void this.resume();var e,n=this,r=o(t,{writable:!1,readable:!0},f(this)),s=function(){n._forward()},a=function(){n.push(null)};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:(e=t,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(e)),this._readable2.on("readable",s),this._readable2.on("end",a),this._unread=function(){n._readable2.removeListener("readable",s),n._readable2.removeListener("end",a),r()},this._forward()}},l.prototype._read=function(){this._drained=!0,this._forward()},l.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=a(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},l.prototype.destroy=function(t){if(!this.destroyed){this.destroyed=!0;var e=this;r.nextTick((function(){e._destroy(t)}))}},l.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},l.prototype._write=function(t,e,n){return this.destroyed?n():this._corked?c(this,this._write.bind(this,t,e,n)):t===u?this._finish(n):this._writable?void(!1===this._writable.write(t)?this._ondrain=n:n()):n()},l.prototype._finish=function(t){var e=this;this.emit("preend"),c(this,(function(){var n,r;n=e._forwardEnd&&e._writable,r=function(){!1===e._writableState.prefinished&&(e._writableState.prefinished=!0),e.emit("prefinish"),c(e,t)},n?n._writableState&&n._writableState.finished?r():n._writableState?n.end(r):(n.end(),r()):r()}))},l.prototype.end=function(t,e,n){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this.write(u),i.Writable.prototype.end.call(this,n))},t.exports=l}).call(this,n(33).Buffer,n(8))},function(t,e){t.exports=function(t){var e=t._readableState;return e?e.objectMode||"number"==typeof t._duplexState?t.read():t.read(function(t){if(t.buffer.length)return t.buffer.head?t.buffer.head.data.length:t.buffer[0].length;return t.length}(e)):null}},function(t,e){var n=null;"undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof MozWebSocket?n=MozWebSocket:"undefined"!=typeof window&&(n=window.WebSocket||window.MozWebSocket),t.exports=n},function(t,e,n){var r;t.exports=(r=n(3),n(41),n(211),n(212),n(26),n(27),n(57),n(92),n(213),n(93),n(214),n(215),n(216),n(58),n(217),n(28),n(7),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),r)},function(t,e,n){var r;t.exports=(r=n(3),function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=t[i]<<24-i%4*8;e.call(this,r,n)}else e.apply(this,arguments)}).prototype=t}}(),r.lib.WordArray)},function(t,e,n){var r;t.exports=(r=n(3),function(){var t=r,e=t.lib.WordArray,n=t.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var n=t.length,r=[],i=0;i<n;i++)r[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return e.create(r,2*n)}},n.Utf16LE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o+=2){var s=i(e[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(t){for(var n=t.length,r=[],o=0;o<n;o++)r[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return e.create(r,2*n)}}}(),r.enc.Utf16)},function(t,e,n){var r,i,o,s,a,u;t.exports=(u=n(3),n(92),i=(r=u).lib.WordArray,o=r.algo,s=o.SHA256,a=o.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=4,t}}),r.SHA224=s._createHelper(a),r.HmacSHA224=s._createHmacHelper(a),u.SHA224)},function(t,e,n){var r,i,o,s,a,u,c,f;t.exports=(f=n(3),n(41),n(93),i=(r=f).x64,o=i.Word,s=i.WordArray,a=r.algo,u=a.SHA512,c=a.SHA384=u.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=u._doFinalize.call(this);return t.sigBytes-=16,t}}),r.SHA384=u._createHelper(c),r.HmacSHA384=u._createHmacHelper(c),f.SHA384)},function(t,e,n){var r;t.exports=(r=n(3),n(41),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.x64.Word,a=e.algo,u=[],c=[],f=[];!function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var r=(2*t+3*e)%5;t=e%5,e=r}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,l=0,h=0;h<7;h++){if(1&i){var p=(1<<h)-1;p<32?l^=1<<p:a^=1<<p-32}128&i?i=i<<1^113:i<<=1}f[o]=s.create(a,l)}}();var l=[];!function(){for(var t=0;t<25;t++)l[t]=s.create()}();var h=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=t[e+2*i],s=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(T=n[i]).high^=s,T.low^=o}for(var a=0;a<24;a++){for(var h=0;h<5;h++){for(var p=0,d=0,_=0;_<5;_++)p^=(T=n[h+5*_]).high,d^=T.low;var y=l[h];y.high=p,y.low=d}for(h=0;h<5;h++){var b=l[(h+4)%5],v=l[(h+1)%5],g=v.high,m=v.low;for(p=b.high^(g<<1|m>>>31),d=b.low^(m<<1|g>>>31),_=0;_<5;_++)(T=n[h+5*_]).high^=p,T.low^=d}for(var w=1;w<25;w++){var E=(T=n[w]).high,S=T.low,I=u[w];I<32?(p=E<<I|S>>>32-I,d=S<<I|E>>>32-I):(p=S<<I-32|E>>>64-I,d=E<<I-32|S>>>64-I);var k=l[c[w]];k.high=p,k.low=d}var O=l[0],A=n[0];for(O.high=A.high,O.low=A.low,h=0;h<5;h++)for(_=0;_<5;_++){var T=n[w=h+5*_],x=l[w],P=l[(h+1)%5+5*_],C=l[(h+2)%5+5*_];T.high=x.high^~P.high&C.high,T.low=x.low^~P.low&C.low}T=n[0];var R=f[a];T.high^=R.high,T.low^=R.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,u=a/8,c=[],f=0;f<u;f++){var l=s[f],h=l.high,p=l.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(h)}return new i.init(c,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});e.SHA3=o._createHelper(h),e.HmacSHA3=o._createHmacHelper(h)}(Math),r.SHA3)},function(t,e,n){var r;t.exports=(r=n(3),
/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),p=s.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,s,p,m,w,E,S,I,k,O,A,T=this._hash.words,x=l.words,P=h.words,C=a.words,R=u.words,j=c.words,N=f.words;for(E=o=T[0],S=s=T[1],I=p=T[2],k=m=T[3],O=w=T[4],n=0;n<80;n+=1)A=o+t[e+C[n]]|0,A+=n<16?d(s,p,m)+x[0]:n<32?_(s,p,m)+x[1]:n<48?y(s,p,m)+x[2]:n<64?b(s,p,m)+x[3]:v(s,p,m)+x[4],A=(A=g(A|=0,j[n]))+w|0,o=w,w=m,m=g(p,10),p=s,s=A,A=E+t[e+R[n]]|0,A+=n<16?v(S,I,k)+P[0]:n<32?b(S,I,k)+P[1]:n<48?y(S,I,k)+P[2]:n<64?_(S,I,k)+P[3]:d(S,I,k)+P[4],A=(A=g(A|=0,N[n]))+O|0,E=O,O=k,k=g(I,10),I=S,S=A;A=T[1]+p+k|0,T[1]=T[2]+m+O|0,T[2]=T[3]+w+E|0,T[3]=T[4]+o+S|0,T[4]=T[0]+s+I|0,T[0]=A},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function d(t,e,n){return t^e^n}function _(t,e,n){return t&e|~t&n}function y(t,e,n){return(t|~e)^n}function b(t,e,n){return t&n|e&~n}function v(t,e,n){return t^(e|~n)}function g(t,e){return t<<e|t>>>32-e}e.RIPEMD160=o._createHelper(p),e.HmacRIPEMD160=o._createHmacHelper(p)}(Math),r.RIPEMD160)},function(t,e,n){var r,i,o,s,a,u,c,f,l;t.exports=(l=n(3),n(57),n(58),i=(r=l).lib,o=i.Base,s=i.WordArray,a=r.algo,u=a.SHA1,c=a.HMAC,f=a.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=c.create(n.hasher,t),i=s.create(),o=s.create([1]),a=i.words,u=o.words,f=n.keySize,l=n.iterations;a.length<f;){var h=r.update(e).finalize(o);r.reset();for(var p=h.words,d=p.length,_=h,y=1;y<l;y++){_=r.finalize(_),r.reset();for(var b=_.words,v=0;v<d;v++)p[v]^=b[v]}i.concat(h),u[0]++}return i.sigBytes=4*f,i}}),r.PBKDF2=function(t,e,n){return f.create(n).compute(t,e)},l.PBKDF2)},function(t,e,n){var r;t.exports=(r=n(3),n(7),r.mode.CFB=function(){var t=r.lib.BlockCipherMode.extend();function e(t,e,n,r){var i=this._iv;if(i){var o=i.slice(0);this._iv=void 0}else o=this._prevBlock;r.encryptBlock(o,0);for(var s=0;s<n;s++)t[e+s]^=o[s]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i,r),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);e.call(this,t,n,i,r),this._prevBlock=o}}),t}(),r.mode.CFB)},function(t,e,n){var r,i,o;t.exports=(o=n(3),n(7),o.mode.CTR=(r=o.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[r-1]=o[r-1]+1|0;for(var a=0;a<r;a++)t[e+a]^=s[a]}}),r.Decryptor=i,r),o.mode.CTR)},function(t,e,n){var r;t.exports=(r=n(3),n(7),
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
r.mode.CTRGladman=function(){var t=r.lib.BlockCipherMode.extend();function e(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}var n=t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),function(t){0===(t[0]=e(t[0]))&&(t[1]=e(t[1]))}(s);var a=s.slice(0);r.encryptBlock(a,0);for(var u=0;u<i;u++)t[n+u]^=a[u]}});return t.Decryptor=n,t}(),r.mode.CTRGladman)},function(t,e,n){var r,i,o;t.exports=(o=n(3),n(7),o.mode.OFB=(r=o.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;s<r;s++)t[e+s]^=o[s]}}),r.Decryptor=i,r),o.mode.OFB)},function(t,e,n){var r,i;t.exports=(i=n(3),n(7),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),r.Decryptor=r.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),r),i.mode.ECB)},function(t,e,n){var r;t.exports=(r=n(3),n(7),r.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,r=4*e,i=r-n%r,o=n+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},r.pad.Ansix923)},function(t,e,n){var r;t.exports=(r=n(3),n(7),r.pad.Iso10126={pad:function(t,e){var n=4*e,i=n-t.sigBytes%n;t.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},r.pad.Iso10126)},function(t,e,n){var r;t.exports=(r=n(3),n(7),r.pad.Iso97971={pad:function(t,e){t.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(t,e)},unpad:function(t){r.pad.ZeroPadding.unpad(t),t.sigBytes--}},r.pad.Iso97971)},function(t,e,n){var r;t.exports=(r=n(3),n(7),r.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},r.pad.ZeroPadding)},function(t,e,n){var r;t.exports=(r=n(3),n(7),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},function(t,e,n){var r,i,o,s;t.exports=(s=n(3),n(7),i=(r=s).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return i.create({ciphertext:e})}},s.format.Hex)},function(t,e,n){var r;t.exports=(r=n(3),n(26),n(27),n(28),n(7),function(){var t=r,e=t.lib.BlockCipher,n=t.algo,i=[],o=[],s=[],a=[],u=[],c=[],f=[],l=[],h=[],p=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var d=r^r<<1^r<<2^r<<3^r<<4;d=d>>>8^255&d^99,i[n]=d,o[d]=n;var _=t[n],y=t[_],b=t[y],v=257*t[d]^16843008*d;s[n]=v<<24|v>>>8,a[n]=v<<16|v>>>16,u[n]=v<<8|v>>>24,c[n]=v,v=16843009*b^65537*y^257*_^16843008*n,f[d]=v<<24|v>>>8,l[d]=v<<16|v>>>16,h[d]=v<<8|v>>>24,p[d]=v,n?(n=_^t[t[t[b^_]]],r^=t[t[r]]):n=r=1}}();var d=[0,1,2,4,8,16,32,64,128,27,54],_=n.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<r;s++)if(s<n)o[s]=e[s];else{var a=o[s-1];s%n?n>6&&s%n==4&&(a=i[a>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a]):(a=i[(a=a<<8|a>>>24)>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a],a^=d[s/n|0]<<24),o[s]=o[s-n]^a}for(var u=this._invKeySchedule=[],c=0;c<r;c++)s=r-c,a=c%4?o[s]:o[s-4],u[c]=c<4||s<=4?a:f[i[a>>>24]]^l[i[a>>>16&255]]^h[i[a>>>8&255]]^p[i[255&a]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,u,c,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,f,l,h,p,o),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,s,a){for(var u=this._nRounds,c=t[e]^n[0],f=t[e+1]^n[1],l=t[e+2]^n[2],h=t[e+3]^n[3],p=4,d=1;d<u;d++){var _=r[c>>>24]^i[f>>>16&255]^o[l>>>8&255]^s[255&h]^n[p++],y=r[f>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&c]^n[p++],b=r[l>>>24]^i[h>>>16&255]^o[c>>>8&255]^s[255&f]^n[p++],v=r[h>>>24]^i[c>>>16&255]^o[f>>>8&255]^s[255&l]^n[p++];c=_,f=y,l=b,h=v}_=(a[c>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[p++],y=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^n[p++],b=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&f])^n[p++],v=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^n[p++],t[e]=_,t[e+1]=y,t[e+2]=b,t[e+3]=v},keySize:8});t.AES=e._createHelper(_)}(),r.AES)},function(t,e,n){var r;t.exports=(r=n(3),n(26),n(27),n(28),n(7),function(){var t=r,e=t.lib,n=e.WordArray,i=e.BlockCipher,o=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var r=s[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var c=i[o]=[],f=u[o];for(n=0;n<24;n++)c[n/6|0]|=e[(a[n]-1+f)%28]<<31-n%6,c[4+(n/6|0)]|=e[28+(a[n+24]-1+f)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var l=this._invSubKeys=[];for(n=0;n<16;n++)l[n]=i[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,n){this._lBlock=t[e],this._rBlock=t[e+1],h.call(this,4,252645135),h.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,s=this._rBlock,a=0,u=0;u<8;u++)a|=c[u][((s^i[u])&f[u])>>>0];this._lBlock=s,this._rBlock=o^a}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,h.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function p(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}t.DES=i._createHelper(l);var d=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;this._des1=l.createEncryptor(n.create(t.slice(0,2))),this._des2=l.createEncryptor(n.create(t.slice(2,4))),this._des3=l.createEncryptor(n.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(d)}(),r.TripleDES)},function(t,e,n){var r;t.exports=(r=n(3),n(26),n(27),n(28),n(7),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=n.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var s=i%n,a=e[s>>>2]>>>24-s%4*8&255;o=(o+r[i]+a)%256;var u=r[i];r[i]=r[o],r[o]=u}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[n],t[n]=o,r|=t[(t[e]+t[n])%256]<<24-8*i}return this._i=e,this._j=n,r}t.RC4=e._createHelper(i);var s=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});t.RC4Drop=e._createHelper(s)}(),r.RC4)},function(t,e,n){var r;t.exports=(r=n(3),n(26),n(27),n(28),n(7),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=[],o=[],s=[],a=n.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,n=0;n<4;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,n=0;n<4;n++)u.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(e){var o=e.words,s=o[0],a=o[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=c>>>16|4294901760&f,h=f<<16|65535&c;for(i[0]^=c,i[1]^=l,i[2]^=f,i[3]^=h,i[4]^=c,i[5]^=l,i[6]^=f,i[7]^=h,n=0;n<4;n++)u.call(this)}},_doProcessBlock:function(t,e){var n=this._X;u.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),t[e+r]^=i[r]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,n=0;n<8;n++)o[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],i=65535&r,a=r>>>16,u=((i*i>>>17)+i*a>>>15)+a*a,c=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=u^c}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=e._createHelper(a)}(),r.Rabbit)},function(t,e,n){var r;t.exports=(r=n(3),n(26),n(27),n(28),n(7),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=[],o=[],s=[],a=n.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)u.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(e){var o=e.words,s=o[0],a=o[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=c>>>16|4294901760&f,h=f<<16|65535&c;for(r[0]^=c,r[1]^=l,r[2]^=f,r[3]^=h,r[4]^=c,r[5]^=l,r[6]^=f,r[7]^=h,i=0;i<4;i++)u.call(this)}},_doProcessBlock:function(t,e){var n=this._X;u.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),t[e+r]^=i[r]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,n=0;n<8;n++)o[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],i=65535&r,a=r>>>16,u=((i*i>>>17)+i*a>>>15)+a*a,c=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=u^c}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=e._createHelper(a)}(),r.RabbitLegacy)},function(t,e){t.exports={INVALID_CONNECT_OPTIONS:"Invalid connect options supplied.",INVALID_CLIENT_ID_OPTION:'Invalid "clientId" (mqtt client id) option supplied.',INVALID_RECONNECT_TIMING:"Invalid reconnect timing options supplied.",INVALID_OFFLINE_QUEUEING_PARAMETERS:"Invalid offline queueing options supplied."}},function(t,e,n){(function(e){var r=n(59),i=n(42),o=n(236);t.exports=function(t){if(i(t.keyPath)&&i(t.privateKey))throw new Error(o.NO_KEY_OPTION);if(i(t.certPath)&&i(t.clientCert))throw new Error(o.NO_CERT_OPTION);if(i(t.caPath)&&i(t.caCert))throw new Error(o.NO_CA_OPTION);if(!i(t.caCert))if(e.isBuffer(t.caCert))t.ca=t.caCert;else{if(!r.existsSync(t.caCert))throw new Error(o.INVALID_CA_CERT_OPTION);t.ca=r.readFileSync(t.caCert)}if(!i(t.privateKey))if(e.isBuffer(t.privateKey))t.key=t.privateKey;else{if(!r.existsSync(t.privateKey))throw new Error(o.INVALID_PRIVATE_KEY_OPTION);t.key=r.readFileSync(t.privateKey)}if(!i(t.clientCert))if(e.isBuffer(t.clientCert))t.cert=t.clientCert;else{if(!r.existsSync(t.clientCert))throw new Error(o.INVALID_CLIENT_CERT_OPTION);t.cert=r.readFileSync(t.clientCert)}if(r.existsSync(t.keyPath))t.key=r.readFileSync(t.keyPath);else if(!i(t.keyPath))throw new Error(o.INVALID_KEY_PATH_OPTION);if(r.existsSync(t.certPath))t.cert=r.readFileSync(t.certPath);else if(!i(t.certPath))throw new Error(o.INVALID_CERT_PATH_OPTION);if(r.existsSync(t.caPath))t.ca=r.readFileSync(t.caPath);else if(!i(t.caPath))throw new Error(o.INVALID_CA_PATH_OPTION);t.requestCert=!0,t.rejectUnauthorized=!0}}).call(this,n(33).Buffer)},function(t,e){t.exports={NO_KEY_OPTION:'No "keyPath" or "privateKey" option supplied.',NO_CERT_OPTION:'No "certPath" or "clientCert" option supplied.',NO_CA_OPTION:'No "caPath" or "caCert" option supplied.',INVALID_KEY_PATH_OPTION:'Invalid "keyPath" option supplied.',INVALID_CERT_PATH_OPTION:'Invalid "certPath" option supplied.',INVALID_CA_PATH_OPTION:'Invalid "caPath" option supplied.',INVALID_CLIENT_CERT_OPTION:'Invalid "clientCert" option supplied.',INVALID_PRIVATE_KEY_OPTION:'Invalid "privateKey" option supplied.',INVALID_CA_CERT_OPTION:'Invalid "caCert" option supplied.'}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}var c=[];for(u=a;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=s+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(8))},function(t){t.exports=JSON.parse('{"_from":"aws-iot-device-sdk@^2.2.1","_id":"aws-iot-device-sdk@2.2.3","_inBundle":false,"_integrity":"sha512-XhKPEZjwtSNJ0oV9l1gJ0YBlcg/M7QzeiUSbW2lLBa3Nuh84OOkQzcUFzNrSWro6sOdrLmLPqWKi7SsERUAbQg==","_location":"/aws-iot-device-sdk","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"aws-iot-device-sdk@^2.2.1","name":"aws-iot-device-sdk","escapedName":"aws-iot-device-sdk","rawSpec":"^2.2.1","saveSpec":null,"fetchSpec":"^2.2.1"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/aws-iot-device-sdk/-/aws-iot-device-sdk-2.2.3.tgz","_shasum":"8041b7acdcbfa1b4e425cb66ac1228aac4277926","_spec":"aws-iot-device-sdk@^2.2.1","_where":"/opt/lampp/htdocs/channelize-js-sdk/channelize-websdk","author":{"name":"Amazon Web Services","url":"http://aws.amazon.com"},"bugs":{"url":"http://github.com/aws/aws-iot-device-sdk-js/issues"},"bundleDependencies":false,"dependencies":{"crypto-js":"3.1.6","minimist":"1.2.0","mqtt":"2.18.8","websocket-stream":"^5.0.1"},"deprecated":false,"description":"AWS IoT Node.js SDK for Embedded Devices","devDependencies":{"gulp":"^3.9.0","gulp-beautify":"^2.0.0","gulp-concat":"^2.6.0","gulp-coverage":"^0.3.38","gulp-jscs":"^4.0.0","gulp-jshint":"^2.0.0","gulp-mocha":"^3.0.1","jshint":"^2.9.1","jshint-stylish":"^2.2.1","rewire":"^2.5.1","sinon":"^1.17.3"},"engines":{"node":">=4.0.0"},"homepage":"https://github.com/aws/aws-iot-device-sdk-js","keywords":["api","amazon","aws","iot","mqtt"],"license":"Apache-2.0","main":"index.js","name":"aws-iot-device-sdk","repository":{"type":"git","url":"git://github.com/aws/aws-iot-device-sdk-js.git"},"scripts":{"beautify":"node ./node_modules/gulp/bin/gulp.js beautify","browserize":"./scripts/browserize.sh","test":"node ./node_modules/gulp/bin/gulp.js test --verbose"},"version":"2.2.3"}')},function(t,e,n){var r=n(59);t.exports=function(t,e){var n;function i(e){t.emit("error",e),n.end()}return(n=r.connect(e)).on("secureConnect",(function(){n.authorized?n.removeListener("error",i):n.emit("error",new Error("TLS not authorized"))})),n.on("error",i),n}},function(t,e,n){const r=n(56);t.exports=function(t,e){return r(e.url,["mqttv3.1"],e.websocketOptions)}},function(t,e,n){var r=n(19),i=n(35).inherits,o=n(50),s=n(42);function a(t,e,n){return s(n)?"$aws/things/"+t+"/shadow/"+e:"$aws/things/"+t+"/shadow/"+e+"/"+n}function u(t){return"$aws/things/"===t.substring(0,12)}function c(t,e){if(!(this instanceof c))return new c(t,e);var n=this,i=[{}],f=0,l=1e4,h=!0,p=o.DeviceClient(t);s(e)||s(e.operationTimeout)||(l=e.operationTimeout),this._handleSubscriptions=function(t,e,n,r){for(var o=[],u=0,c=e.length;u<c;u++)for(var f=0,l=e[u].operations.length;f<l;f++)for(var h=0,d=e[u].statii.length;h<d;h++)o.push(a(t,e[u].operations[f],e[u].statii[h]));!0===i[t].debug&&console.log(n+" on "+o);var _=[];_.push(o),"subscribe"===n?(_.push({qos:i[t].qos}),_.push((function(t,e){if(!s(r)){if(t)return void r(t);for(var n=[],i=0,o=e.length;i<o;i++)128===e[i].qos&&n.push(e[i]);if(n.length>0)return void r("Not all subscriptions were granted",n);r()}}))):s(r)||_.push(r),p[n].apply(p,_)},this._handleMessages=function(e,n,r,o){var a={};try{a=JSON.parse(o.toString())}catch(e){return void(!0===t.debug&&console.error("failed parsing JSON '"+o.toString()+"', "+e))}var u=a.clientToken,c=a.version;if(delete a.clientToken,!s(c)&&"rejected"!==r)if(s(i[e].version)||c>=i[e].version)i[e].version=c;else if("delete"!==n&&!0===i[e].discardStale)return void(!0===t.debug&&console.warn("out-of-date version '"+c+"' on '"+e+"' (local version '"+i[e].version+"')"));"delta"!==r?s(i[e].clientToken)||i[e].clientToken!==u?"accepted"===r&&"get"!==n&&this.emit("foreignStateChange",e,n,a):(clearTimeout(i[e].timeout),delete i[e].timeout,delete i[e].clientToken,i[e].pending=!1,!1===i[e].persistentSubscribe&&this._handleSubscriptions(e,[{operations:[n],statii:["accepted","rejected"]}],"unsubscribe"),this.emit("status",e,r,u,a)):this.emit("delta",e,a)},p.on("connect",(function(){n.emit("connect")})),p.on("close",(function(){n.emit("close")})),p.on("reconnect",(function(){n.emit("reconnect")})),p.on("offline",(function(){n.emit("offline")})),p.on("error",(function(t){n.emit("error",t)})),p.on("packetsend",(function(t){n.emit("packetsend",t)})),p.on("packetreceive",(function(t){n.emit("packetreceive",t)})),p.on("message",(function(t,e){if(!0===h){var r=t.split("/");!function(t,e){var n=!1;return"$aws"===t[0]&&("things"!==t[1]||"shadow"!==t[3]||"update"!==t[4]&&"get"!==t[4]&&"delete"!==t[4]||("subscribe"===e?"accepted"!==t[5]&&"rejected"!==t[5]&&"delta"!==t[5]||6!==t.length||(n=!0):5===t.length&&(n=!0))),n}(r,"subscribe")?n.emit("message",t,e):i.hasOwnProperty(r[2])&&n._handleMessages(r[2],r[4],r[5],e)}})),this._thingOperation=function(e,r,o){var u=null;if(i.hasOwnProperty(e))if(!1===i[e].pending){var c;if(i[e].pending=!0,s(o.clientToken)){var h=t.clientId.length;c=h>48?t.clientId.substr(h-48)+"-"+f++:t.clientId+"-"+f++}else c=o.clientToken;i[e].clientToken=c;var d=a(e,r);i[e].timeout=setTimeout((function(t,e){!1===i[t].persistentSubscribe&&n._handleSubscriptions(t,[{operations:[r],statii:["accepted","rejected"]}],"unsubscribe"),i[t].pending=!1,delete i[t].timeout,delete i[t].clientToken,n.emit("timeout",t,e)}),l,e,c),!1===i[e].persistentSubscribe?this._handleSubscriptions(e,[{operations:[r],statii:["accepted","rejected"]}],"subscribe",(function(t,n){s(t)&&s(n)?s(o)||(!s(i[e].version)&&i[e].enableVersioning&&(o.version=i[e].version),o.clientToken=c,p.publish(d,JSON.stringify(o),{qos:i[e].qos}),s(i[e])||!0!==i[e].debug||console.log("publishing '"+JSON.stringify(o)+" on '"+d+"'")):console.warn("failed subscription to accepted/rejected topics")})):(!s(i[e].version)&&i[e].enableVersioning&&(o.version=i[e].version),o.clientToken=c,p.publish(d,JSON.stringify(o),{qos:i[e].qos}),!0===i[e].debug&&console.log("publishing '"+JSON.stringify(o)+" on '"+d+"'")),u=c}else!0===t.debug&&console.error(r+" still in progress on thing: ",e);else!0===t.debug&&console.error("attempting to "+r+" unknown thing: ",e);return u},this.register=function(e,n,r){if(i.hasOwnProperty(e))!0===t.debug&&console.error("thing already registered: ",e);else{var o=!1,a=[];i[e]={persistentSubscribe:!0,debug:!1,discardStale:!0,enableVersioning:!0,qos:0,pending:!0},"function"==typeof n&&(r=n,n=null),s(n)||(s(n.ignoreDeltas)||(o=n.ignoreDeltas),s(n.persistentSubscribe)||(i[e].persistentSubscribe=n.persistentSubscribe),s(n.debug)||(i[e].debug=n.debug),s(n.discardStale)||(i[e].discardStale=n.discardStale),s(n.enableVersioning)||(i[e].enableVersioning=n.enableVersioning),s(n.qos)||(i[e].qos=n.qos)),!1===o&&a.push({operations:["update"],statii:["delta"]}),!0===i[e].persistentSubscribe&&a.push({operations:["update","get","delete"],statii:["accepted","rejected"]}),a.length>0?this._handleSubscriptions(e,a,"subscribe",(function(t,n){s(t)&&s(n)&&(i[e].pending=!1),s(r)||r(t,n)})):(i[e].pending=!1,s(r)||r())}},this.unregister=function(e){if(i.hasOwnProperty(e)){var n=[];n.push({operations:["update"],statii:["delta"]}),!0===i[e].persistentSubscribe&&n.push({operations:["update","get","delete"],statii:["accepted","rejected"]}),this._handleSubscriptions(e,n,"unsubscribe"),s(i[e].timeout)||clearTimeout(i[e].timeout),delete i[e]}else!0===t.debug&&console.error("attempting to unregister unknown thing: ",e)},this.update=function(t,e){var r=null;return s(e.version)?r=n._thingOperation(t,"update",e):console.error("message can't contain 'version' property"),r},this.get=function(t,e){var r={};return s(e)||(r.clientToken=e),n._thingOperation(t,"get",r)},this.delete=function(t,e){var r={};return s(e)||(r.clientToken=e),n._thingOperation(t,"delete",r)},this.publish=function(t,e,n,r){if(u(t))throw"cannot publish to reserved topic '"+t+"'";p.publish(t,e,n,r)},this.subscribe=function(t,e,n){var r=[];"string"==typeof t?r.push(t):"object"==typeof t&&t.length&&(r=t);for(var i=0;i<r.length;i++)if(u(r[i]))throw"cannot subscribe to topic array since one of them is a reserved topic '"+r[i]+"'";p.subscribe(r,e,n)},this.unsubscribe=function(t,e){var n=[];"string"==typeof t?n.push(t):"object"==typeof t&&t.length&&(n=t);for(var r=0;r<n.length;r++)if(u(n[r]))throw"cannot unsubscribe from topic array since one of them is a reserved topic '"+n[r]+"'";p.unsubscribe(n,e)},this.end=function(t,e){p.end(t,e)},this.updateWebSocketCredentials=function(t,e,n,r){p.updateWebSocketCredentials(t,e,n,r)},this.updateCustomAuthHeaders=function(t){p.updateCustomAuthHeaders(t)},this.setConnectionStatus=function(t){h=t},r.EventEmitter.call(this)}i(c,r.EventEmitter),t.exports=c},function(t,e,n){var r=n(19),i=n(35).inherits,o=n(50),s=n(42);function a(t,e,n){var r="$aws/things/"+t+"/jobs/";return s(n)?n=e:r+=e.toString()+"/",r+=n}function u(t){if(!(this instanceof u))return new u(t);var e=this,n=[],r=o.DeviceClient(t);this._updateJobStatus=function(e,n,i,o,u){"function"==typeof o&&(u=o,o=void 0),s(t)||!0!==t.debug||console.log("updateJobStatus:",{thingName:e,jobId:n.id,status:i,statusDetails:o}),r.publish(a(e,n.id,"update"),JSON.stringify({status:i,statusDetails:o}),null,(function(t){s(t)&&(n.status={status:i,statusDetails:o}),s(u)||u(t)}))},this._buildJobObject=function(t,n){if(s(n)||s(n.jobId))return null;var r={};return r.id=n.jobId,r.document=n.jobDocument,r.operation=r.document.operation,r.status={status:n.status,statusDetails:n.statusDetails},r.inProgress=function(n,i){e._updateJobStatus(t,r,"IN_PROGRESS",n,i)},r.failed=function(n,i){e._updateJobStatus(t,r,"FAILED",n,i)},r.succeeded=function(n,i){e._updateJobStatus(t,r,"SUCCEEDED",n,i)},r},this._handleMessages=function(r,i){var o=r.split("/");if(function(t){return"$aws"===t[0]&&"things"===t[1]&&"jobs"===t[3]}(o)){var a=o[2],u=n.find((function(t){return t.thingName===a}));if(!s(u)){var c={};try{c=JSON.parse(i.toString())}catch(e){return void(!0===t.debug&&console.error("failed parsing JSON '"+i.toString()+"', "+e))}if(!(s(c.execution)||s(c.execution.jobId)||s(c.execution.jobDocument))){var f=c.execution.jobDocument.operation,l=u.operations.find((function(t){return s(f)?s(t.operationName):f===t.operationName}));s(l)&&(l=u.operations.find((function(t){return s(t.operationName)})),s(l))||l.callback(null,e._buildJobObject(a,c.execution))}}}else e.emit("message",r,i)},this.subscribeToJobs=function(e,i,o){s(o)&&(o=i,i=null),s(t)||!0!==t.debug||console.log("subscribeToJobs:",{thingName:e,operationName:i});var u=n.find((function(t){return t.thingName===e}));s(u)&&(u={thingName:e,operations:[]},n.push(u),r.subscribe([a(e,"$next/get/accepted"),a(e,"notify-next")],(function(t,e){s(t)||o(t)})));var c=u.operations.find((function(t){return s(i)?s(t.operationName):i===t.operationName}));s(c)?(c={operationName:i,callback:o},u.operations.push(c)):c.callback=o},this.unsubscribeFromJobs=function(e,i,o){s(o)&&(o=i,i=null),s(t)||!0!==t.debug||console.log("unsubscribeFromJobs:",{thingName:e,operationName:i});var u=n.findIndex((function(t){return t.thingName===e})),c=new Error("subscription not found for given thing");if(u<0)o(c);else{var f=n[u].operations.findIndex((function(t){return s(i)?s(t.operationName):i===t.operationName}));if(f<0)o(c);else{if(n[u].operations.splice(f,1),0===n[u].operations.length)return n.splice(u,1),void r.unsubscribe([a(e,"$next/get/accepted"),a(e,"notify-next")],o);o()}}},this.startJobNotifications=function(e,n){s(t)||!0!==t.debug||console.log("startJobNotifications:",{thingName:e}),r.publish(a(e,"$next","get"),"{}",n)},r.on("connect",(function(){e.emit("connect")})),r.on("close",(function(){e.emit("close")})),r.on("reconnect",(function(){e.emit("reconnect")})),r.on("offline",(function(){e.emit("offline")})),r.on("error",(function(t){e.emit("error",t)})),r.on("message",e._handleMessages),this.publish=r.publish,this.subscribe=r.subscribe,this.unsubscribe=r.unsubscribe,this.end=r.end,this.handleMessage=r.handleMessage,this.updateWebSocketCredentials=r.updateWebSocketCredentials,this.simulateNetworkFailure=r.simulateNetworkFailure}i(u,r.EventEmitter),t.exports=u}]);